<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CopyClean Expert Report System</title>
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- PDF & Canvas Utils -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <!-- Chart.js (Page 3 Ï∞®Ìä∏Ïö©) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- QR Code Generator (Page 2 QRÏö©) -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap');
        
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f1f5f9; color: #334155; }

        /* A4 Fixed Layout (794px x 1123px) */
        .pdf-page {
            width: 794px;
            height: 1123px;
            margin: 40px auto;
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            box-sizing: border-box;
            overflow: hidden;
            flex-shrink: 0;
        }

        /* Page 1: Standard Report Styles */
        .p1-header { border-bottom: 2px solid #334155; padding-bottom: 10px; margin-bottom: 20px; }
        .p1-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .p1-table th, .p1-table td { border: 1px solid #cbd5e1; padding: 6px 10px; vertical-align: middle; }
        .p1-table th { background: #e2e8f0; font-weight: 700; color: #1e293b; text-align: center; width: 120px; }
        .p1-table td { color: #334155; font-weight: 500; }
        
        /* Page 2: Premium Dark Styles (Moved from Page 3) */
        .p2-container { background-color: #0f172a; color: white; height: 100%; padding: 50px; position: relative; }
        .p2-card { background: #1e293b; border-radius: 16px; padding: 25px; border: 1px solid #334155; }
        .p2-highlight { background: #2563eb; color: white; padding: 5px 10px; border-radius: 4px; font-size: 10px; font-weight: 800; display: inline-block; margin-bottom: 10px; }
        
        /* Page 1: Diagnostic Report Header & Verdict Styles */
        .p3-header { border-bottom: 1px solid #e2e8f0; padding-bottom: 0px; margin-bottom: 8px; }
        .verdict-box { border-radius: 12px; padding: 20px; text-align: center; }
        .verdict-danger { background: #fff1f2; border: 1px solid #fda4af; color: #be123c; }
        .verdict-safe { background: #f0fdf4; border: 1px solid #86efac; color: #15803d; }

        /* Page 4+: Î¨∏Ïû•Î≥Ñ Ï†ïÎ∞Ä ÎåÄÏ°∞ Í≤∞Í≥º Styles */
        .content-padding { padding: 28px 32px; display: flex; flex-direction: column; }
        .comp-page-title { font-size: 20px; font-weight: 900; color: #1e293b; letter-spacing: -0.5px; }
        .comp-page-subtitle { font-size: 11px; color: #94a3b8; margin-top: 2px; }
        .comp-divider { height: 2px; background: linear-gradient(to right, #0d9488, #14b8a6); margin: 8px 0 14px 0; border-radius: 2px; }
        .comp-card { border: 1.5px solid #e2e8f0; border-radius: 8px; overflow: hidden; margin-bottom: 18px; background: white; }
        .comp-card-hdr { display: flex; }
        .comp-card-hdr-l, .comp-card-hdr-r { flex: 1; padding: 6px 12px; display: flex; justify-content: space-between; align-items: center; font-size: 10px; font-weight: 700; }
        .comp-badge { padding: 2px 9px; border-radius: 999px; font-size: 9px; font-weight: 700; white-space: nowrap; }
        .comp-card-body { display: flex; }
        .comp-card-body-l { flex: 1; padding: 10px 12px; border-right: 1px solid #e2e8f0; font-size: 11px; line-height: 1.7; color: #334155; text-align: justify; }
        .comp-card-body-r { flex: 1; padding: 10px 12px; font-size: 10px; line-height: 1.6; color: #475569; display: flex; flex-direction: column; }
        .comp-src-box { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 6px; padding: 6px 10px; margin: 5px 0; font-size: 9.5px; line-height: 1.6; }
        .comp-card-foot { display: flex; justify-content: space-between; align-items: center; padding: 4px 12px; border-top: 1px solid #e2e8f0; font-size: 9px; color: #94a3b8; }
        .comp-db-title { font-weight: 800; font-size: 11.5px; margin-bottom: 3px; color: #1e293b; }
        .comp-match-badge { display: inline-block; font-size: 8px; padding: 1px 8px; border-radius: 999px; font-weight: 600; }
        /* Green: Î¨∏Ìóå ÌëúÏ†à */
        .card-plag .comp-card-hdr-l { background: #0d9488; color: white; }
        .card-plag .comp-card-hdr-r { background: #f0fdfa; color: #0d9488; border-left: 1px solid #ccfbf1; }
        .card-plag .comp-badge-l { background: #065f46; color: white; }
        .card-plag .comp-badge-r { background: #0d9488; color: white; }
        .card-plag .comp-quote { border-left: 3px solid #0d9488; padding: 5px 10px; margin: 5px 0; color: #115e59; font-size: 9.5px; line-height: 1.6; background: #f0fdfa; border-radius: 0 4px 4px 0; }
        .card-plag .hl { color: #065f46; font-weight: normal; text-decoration: underline; text-underline-offset: 2px; }
        .card-plag .comp-match-badge { background: #ccfbf1; color: #0d9488; }
        /* Orange: AI Ïú†ÏÇ¨ÎèÑ */
        .card-ai .comp-card-hdr-l { background: #ea580c; color: white; }
        .card-ai .comp-card-hdr-r { background: #fff7ed; color: #ea580c; border-left: 1px solid #fed7aa; }
        .card-ai .comp-badge-l { background: #9a3412; color: white; }
        .card-ai .comp-badge-r { background: #ea580c; color: white; }
        .card-ai .comp-quote { border-left: 3px solid #ea580c; padding: 5px 10px; margin: 5px 0; color: #7c2d12; font-size: 9.5px; line-height: 1.6; background: #fff7ed; border-radius: 0 4px 4px 0; }
        .card-ai .hl { color: #9a3412; font-weight: normal; text-decoration: underline; text-underline-offset: 2px; }
        .card-ai .comp-match-badge { background: #fed7aa; color: #ea580c; }
        
        /* Utilities */
        .approval-box { position: absolute; top: 40px; right: 50px; border: 1px solid #94a3b8; background: white; z-index: 10; width: 80px; }
        .approval-table th, .approval-table td { border: 1px solid #94a3b8; text-align: center; padding: 2px; font-size: 10px; }
        .approval-space { height: 45px; }

        /* Hide during PDF generation */
        #hidden-area { position: absolute; left: -9999px; top: 0; }

        /* ‚òÖ Ïù∏ÏáÑÏö© CSS - PDF Îã§Ïö¥Î°úÎìú Ïãú ÏÇ¨Ïö© */
        @page {
            size: 794px 1123px;
            margin: 0;
        }
        @media print {
            @page { margin: 0; }
            html, body { margin: 0 !important; padding: 0 !important; background: white !important; width: 794px !important; }
            /* Î∞∞Í≤ΩÏÉâ/Í∑∏ÎùºÎîîÏñ∏Ìä∏ Í∞ïÏ†ú Ï∂úÎ†• */
            * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            /* nav Î∞è ÎπÑ-Î≥¥Í≥†ÏÑú ÏöîÏÜå Ïà®ÍπÄ */
            nav { display: none !important; }
            main { padding: 0 !important; margin: 0 !important; min-height: auto !important; }
            main > div:not(.flex) { display: none !important; }
            /* ÌéòÏù¥ÏßÄ Í∞Ñ Í∞ÑÍ≤© Ï†úÍ±∞ + ÌéòÏù¥ÏßÄ ÎÇòÎàÑÍ∏∞ */
            .flex.flex-col.gap-10 { gap: 0 !important; }
            .pdf-page {
                margin: 0 !important;
                box-shadow: none !important;
                page-break-after: always;
                page-break-inside: avoid;
                break-after: page;
                break-inside: avoid;
            }
            .pdf-page:last-child { page-break-after: auto; break-after: auto; }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Top Navigation -->
        <nav class="bg-slate-900 text-white px-6 py-4 sticky top-0 z-50 shadow-xl flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center font-bold text-xl">C</div>
                <div>
                    <h1 class="text-lg font-bold">COPYCLEAN</h1>
                    <p class="text-[10px] text-slate-400 font-bold uppercase">Expert Report System</p>
                </div>
            </div>
            <div class="flex gap-3">
                <input type="file" ref="fileInput" class="hidden" accept="application/pdf" @change="handleFileUpload">
                
                <div v-if="status === 'idle'">
                    <button @click="$refs.fileInput.click()" class="bg-blue-600 hover:bg-blue-500 px-6 py-2 rounded-full font-bold text-sm transition-all flex items-center gap-2">
                        <span>üìÑ PDF ÏóÖÎ°úÎìú Î∞è Î∂ÑÏÑù</span>
                    </button>
                </div>
                
                <div v-else-if="status === 'processing'" class="flex items-center gap-3 bg-slate-800 px-4 py-2 rounded-full border border-slate-700">
                    <span class="animate-spin text-blue-500">‚è≥</span>
                    <span class="text-xs font-bold text-blue-200">{{ progressText }}</span>
                </div>

                <div v-else class="flex gap-2">
                    <button @click="reset" class="px-4 py-2 text-sm text-slate-400 hover:text-white font-bold">Ï¥àÍ∏∞Ìôî</button>
                    <button @click="downloadPDF" :disabled="isExporting" class="bg-emerald-500 hover:bg-emerald-400 px-6 py-2 rounded-full font-bold text-sm flex items-center gap-2 shadow-lg transition-all">
                        {{ isExporting ? 'PDF ÏÉùÏÑ± Ï§ë...' : 'üì• Ï†ÑÏ≤¥ Î¶¨Ìè¨Ìä∏ Îã§Ïö¥Î°úÎìú' }}
                    </button>
                </div>
            </div>
        </nav>

        <main class="py-10 flex flex-col items-center min-h-screen">
            <!-- Initial State -->
            <div v-if="status === 'idle'"
                 class="text-center py-40 bg-white rounded-3xl shadow-sm border-2 border-dashed border-slate-300 max-w-2xl mx-auto mt-10 p-10 transition-all duration-200"
                 :class="{ 'border-blue-500 bg-blue-50': isDragging }"
                 @dragover.prevent="isDragging = true"
                 @dragenter.prevent="isDragging = true"
                 @dragleave.prevent="isDragging = false"
                 @drop.prevent="handleDrop">
                <h2 class="text-3xl font-black text-slate-800 mb-4">Î¨∏ÏÑú Î¨¥Í≤∞ÏÑ± ÏßÑÎã® ÏãúÏä§ÌÖú</h2>
                <p class="text-slate-500 mb-6">PDF ÌååÏùºÏùÑ ÏóÖÎ°úÎìúÌïòÎ©¥ 3Îã®Í≥Ñ Ï†ïÎ∞Ä Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏(ÌëúÏßÄ, ÌîÑÎ¶¨ÎØ∏ÏóÑ ÏÜîÎ£®ÏÖò, ÏßÑÎã® Í≤∞Í≥º)ÏôÄ Ïû¨Íµ¨ÏÑ±Îêú Î≥∏Î¨∏ÏùÑ ÏÉùÏÑ±Ìï©ÎãàÎã§.</p>
                <p v-if="isDragging" class="text-blue-600 font-bold text-lg mb-6">Ïó¨Í∏∞Ïóê ÌååÏùºÏùÑ ÎÜìÏúºÏÑ∏Ïöî</p>
                <p v-else class="text-slate-400 text-sm mb-6">PDF ÌååÏùºÏùÑ ÎìúÎûòÍ∑∏ÌïòÏó¨ ÎÜìÍ±∞ÎÇò, ÏïÑÎûò Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî</p>
                <button @click="$refs.fileInput.click()" class="bg-slate-900 text-white px-8 py-4 rounded-xl font-bold hover:scale-105 transition-transform">
                    Î∂ÑÏÑù ÏãúÏûëÌïòÍ∏∞
                </button>
            </div>

            <!-- Report Preview -->
            <div v-if="pages.length > 0" class="flex flex-col gap-10">

                <!-- PAGE 1: ÏßÑÎã® Í≤∞Í≥ºÏÑú (Chart) -->
                <div id="page-1" class="pdf-page p-12">
                    <div class="p3-header flex justify-between items-end">
                        <div style="padding-bottom:8px;">
                            <h2 class="text-2xl font-black text-slate-900">Ïπ¥ÌîºÌÅ¥Î¶∞ ÏßÑÎã® Í≤∞Í≥ºÏÑú</h2>
                            <p class="text-xs text-blue-600 font-bold mt-1 tracking-widest">COPYCLEAN DIAGNOSTIC REPORT</p>
                        </div>
                        <img src="origin.png" alt="CopyClean" style="height: 81px; object-fit: contain; margin-right: -5px; margin-bottom: -1px;">
                    </div>

                    <!-- Meta Info Bar -->
                    <div class="grid grid-cols-4 gap-4 mb-6 mt-6 text-xs bg-slate-50 rounded-lg p-5 border border-slate-200">
                        <div>
                            <div class="text-[10px] text-slate-400 font-bold">REPORT ID</div>
                            <div class="font-bold text-slate-800">{{ reportId }}</div>
                        </div>
                        <div>
                            <div class="text-[10px] text-slate-400 font-bold">Î∞úÍ∏âÏùºÏûê</div>
                            <div class="font-bold text-slate-800">{{ issueDate }}</div>
                        </div>
                        <div>
                            <div class="text-[10px] text-slate-400 font-bold">Î¨∏ÏÑúÎ™Ö</div>
                            <div class="font-bold text-slate-800 truncate">{{ docTitle }}</div>
                        </div>
                        <div>
                            <div class="text-[10px] text-slate-400 font-bold">ÏßÑÎã® Î™®Îç∏ Î≤ÑÏ†Ñ</div>
                            <div class="font-bold text-slate-800">{{ diagModel }}</div>
                        </div>
                    </div>

                    <!-- Dashboard -->
                    <div class="grid grid-cols-2 gap-8 mb-4">
                        <!-- Chart Area -->
                        <div class="relative w-full flex flex-col items-center justify-center">
                            <h3 class="text-sm font-bold text-slate-700 mb-3 w-full text-left">ÌëúÏ†àÎ•†</h3>
                            <div class="w-full flex-1"><canvas id="rateChart"></canvas></div>
                        </div>

                        <!-- Verdict Area -->
                        <div class="flex flex-col justify-center">
                            <div :class="['verdict-box mb-4', numericRate > 15 ? 'verdict-danger' : 'verdict-safe']">
                                <div class="text-3xl mb-2">
                                    <svg v-if="numericRate > 15" class="w-8 h-8 mx-auto text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.999L13.732 4.002c-.77-1.333-2.694-1.333-3.464 0L3.34 16.001c-.77 1.332.192 2.999 1.732 2.999z"/></svg>
                                    <span v-else class="text-3xl">‚úÖ</span>
                                </div>
                                <h3 class="text-xl font-black mb-1">Ï¢ÖÌï© ÌåêÏ†ï: <span :class="numericRate > 30 ? 'text-red-600' : (numericRate > 15 ? 'text-orange-500' : 'text-green-600')">{{ getVerdictText }}</span></h3>
                                <p class="text-xs opacity-80 mt-2">AI ÏÉùÏÑ± Ïú†ÏÇ¨ Î∞è Ï∂úÏ≤ò ÎåÄÏ°∞ Ïú†ÏÇ¨ ÎπÑÏú®Ïù¥<br>{{ plagiarismRate }}Î°ú ÎÜíÍ≤å Î∂ÑÏÑùÎêòÏóàÏäµÎãàÎã§.</p>
                            </div>

                            <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                <h4 class="text-xs font-bold text-slate-500 mb-3">&gt; Ï¢ÖÌï© ÏßÑÎã® ÌåêÏ†ï Í∏∞Ï§Ä</h4>
                                <div class="flex justify-between gap-2 text-center text-[10px] font-bold">
                                    <div class="bg-white border border-slate-200 flex-1 py-2 rounded"><span class="text-green-600">ÏïàÏ†Ñ</span><br>15% Ïù¥Ìïò</div>
                                    <div class="bg-white border border-slate-200 flex-1 py-2 rounded"><span class="text-orange-500">Í≥†ÏúÑÌóò</span><br>15 ~ 30%</div>
                                    <div class="bg-white border border-slate-200 flex-1 py-2 rounded"><span class="text-red-500">Î∂ÄÏ†ÅÌï©</span><br>30% Ï¥àÍ≥º</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ï†ïÎ∞Ä ÏßÑÎã® Í≤∞Í≥º ÏöîÏïΩ -->
                    <div class="mb-3 mt-2">
                        <h3 class="text-sm font-black text-slate-800 mb-2 flex items-center gap-2">
                            <span class="w-1 h-4 bg-blue-600 rounded-full inline-block"></span>
                            Ï†ïÎ∞Ä ÏßÑÎã® Í≤∞Í≥º ÏöîÏïΩ
                        </h3>
                        <div class="grid grid-cols-5 gap-2 mb-3 text-center">
                            <div :class="[numericRate > 30 ? 'bg-red-600' : (numericRate > 15 ? 'bg-orange-500' : 'bg-green-600'), 'text-white rounded-lg py-3 px-2']">
                                <div class="text-[10px] font-bold">ÌëúÏ†àÎ•†</div>
                                <div class="text-2xl font-black mt-1">{{ plagiarismRate }}</div>
                            </div>
                            <div class="bg-slate-100 rounded-lg py-3 px-2">
                                <div class="text-[10px] font-bold text-slate-500">Ï†ÑÏ≤¥ Î¨∏Ïû• Ïàò</div>
                                <div class="text-2xl font-black text-slate-800 mt-1">{{ totalSentences }}</div>
                            </div>
                            <div class="bg-slate-100 rounded-lg py-3 px-2">
                                <div class="text-[10px] font-bold text-slate-500">AI Ïú†ÏÇ¨ Î¨∏Ïû•</div>
                                <div class="text-2xl font-black mt-1" style="color:#ea580c;">{{ aiSimilarSentences }}</div>
                            </div>
                            <div class="bg-slate-100 rounded-lg py-3 px-2">
                                <div class="text-[10px] font-bold text-slate-500">ÌëúÏ†à ÏùòÏã¨ Î¨∏Ïû•</div>
                                <div class="text-2xl font-black mt-1" style="color:#0d9488;">{{ suspiciousSentences }}</div>
                            </div>
                            <div class="bg-slate-100 rounded-lg py-3 px-2">
                                <div class="text-[10px] font-bold text-slate-500">Ïù∏Ïö©/Ï∂úÏ≤ò</div>
                                <div class="text-2xl font-black text-slate-400 mt-1">{{ citationCount }}</div>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <!-- Ïú†ÏÇ¨ Ïú†Ìòï Î∂ÑÌè¨ Î∂ÑÏÑù -->
                            <div class="border border-slate-200 rounded-lg p-3">
                                <h4 class="text-[10px] font-bold text-slate-700 mb-2 flex items-center gap-1">
                                    <span class="w-1.5 h-1.5 bg-green-500 rounded-full"></span> Ïú†ÏÇ¨ÏÑ± Î∂ÑÏÑù Î∂ÑÌè¨
                                </h4>
                                <div class="text-[9px] text-slate-500 mb-1">Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ ÎåÄÏ°∞ Í≤∞Í≥º &nbsp;&nbsp; <span class="font-bold text-slate-800">{{ totalSentences }} Î¨∏Ïû• Ï§ë</span></div>
                                <div class="w-full h-3 rounded-full overflow-hidden flex" style="background: #e2e8f0;">
                                    <div :style="{ width: distributionBar.identical + '%', background: '#dc2626' }" title="ÎèôÏùº Î¨∏Ïû•"></div>
                                    <div :style="{ width: distributionBar.suspicious + '%', background: '#0d9488' }" title="ÏùòÏã¨ Î¨∏Ïû•"></div>
                                    <div :style="{ width: distributionBar.citation + '%', background: '#94a3b8' }" title="Ïù∏Ïö©/Ï∂úÏ≤ò"></div>
                                    <div :style="{ width: distributionBar.aiSimilar + '%', background: '#ea580c' }" title="AI Ïú†ÏÇ¨"></div>
                                </div>
                                <div class="flex gap-2 mt-1 text-[8px] text-slate-500">
                                    <span class="flex items-center gap-0.5"><span class="w-1.5 h-1.5 rounded-full" style="background:#dc2626;"></span>ÎèôÏùº Î¨∏Ïû•</span>
                                    <span class="flex items-center gap-0.5"><span class="w-1.5 h-1.5 rounded-full" style="background:#0d9488;"></span>ÏùòÏã¨ Î¨∏Ïû•</span>
                                    <span class="flex items-center gap-0.5"><span class="w-1.5 h-1.5 bg-slate-400 rounded-full"></span>Ïù∏Ïö©/Ï∂úÏ≤ò</span>
                                    <span class="flex items-center gap-0.5"><span class="w-1.5 h-1.5 rounded-full" style="background:#ea580c;"></span>AI Ïú†ÏÇ¨</span>
                                </div>
                            </div>

                            <!-- Ï∂úÏ≤ò Ïú†Ìòï Î∂ÑÌè¨ -->
                            <div class="border border-slate-200 rounded-lg p-3">
                                <h4 class="text-[10px] font-bold text-slate-700 mb-2 flex items-center gap-1">
                                    <span class="w-1.5 h-1.5 bg-orange-500 rounded-full"></span> Ìï¥Îãπ Ïπ¥ÌÖåÍ≥†Î¶¨ ÎπÑÏú®
                                </h4>
                                <div class="space-y-1.5">
                                    <template v-for="(cat, cIdx) in categoryRatios" :key="cIdx">
                                        <div class="flex justify-between items-center text-[10px]">
                                            <span class="text-slate-600">{{ cat.name }}</span>
                                            <span class="font-bold text-slate-800">{{ cat.ratio }}%</span>
                                        </div>
                                        <div class="w-full h-1.5 bg-slate-100 rounded-full"><div class="h-1.5 rounded-full bg-slate-500" :style="{ width: cat.ratio + '%' }"></div></div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Summary -->
                    <div class="grid grid-cols-2 gap-6 mt-6">
                        <div>
                            <h4 class="border-l-4 border-blue-600 pl-3 text-xs font-bold text-slate-800 mb-3">ÏßÑÎã® Ï¥ùÌèâ</h4>
                            <ul class="space-y-3 text-[10px] text-slate-600">
                                <li v-for="(item, idx) in diagnosisSummary" :key="idx" class="flex gap-1.5">
                                    <span class="bg-blue-100 text-blue-600 font-bold rounded px-1 py-0.5 h-fit text-[9px]">{{ idx + 1 }}</span>
                                    <span>{{ item }}</span>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="border-l-4 border-blue-600 pl-3 text-xs font-bold text-slate-800 mb-3">Ï†úÏ∂ú Ï£ºÏùòÏÇ¨Ìï≠</h4>
                            <ul class="list-disc pl-4 space-y-2.5 text-[10px] text-slate-600">
                                <li v-for="(item, idx) in submissionNotes" :key="idx">{{ item }}</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Page 1 Footer -->
                    <div style="position:absolute;bottom:0;left:0;right:0;padding:0 48px 28px 48px;">
                        <div style="height:2px;background:linear-gradient(to right,#1a6b8a,#4a9e3f);margin-bottom:10px;"></div>
                        <div style="display:flex;justify-content:space-between;align-items:center;">
                            <div>
                                <p style="font-size:7px;color:#94a3b8;line-height:1.5;">Î≥∏ Í≤∞Í≥ºÏßÄÎäî CopyClean(Ïπ¥ÌîºÌÅ¥Î¶∞) Î∂ÑÏÑù ÏãúÏä§ÌÖúÏù¥ Î¨∏ÏÑúÎ•º ÏûêÎèô ÎåÄÏ°∞ÌïòÏó¨ ÏÉùÏÑ±Ìïú Ï∞∏Í≥†Ïö© Î¶¨Ìè¨Ìä∏ÏûÖÎãàÎã§.<br>ÏµúÏ¢ÖÏ†ÅÏù∏ ÌëúÏ†à Ïó¨Î∂Ä ÌåêÏ†ïÏùÄ Ìï¥Îãπ ÍµêÏú° Í∏∞Í¥Ä Î∞è ÌïôÏúÑÏùò Í∑úÏ†ïÍ≥º Í≥ºÏ†ïÏóê Îî∞Îùº Ïã¨ÏÇ¨ÏúÑÏõêÏùò ÌåêÏ†ïÌïòÏóê, ÏãúÏä§ÌÖú Ï†êÏàòÎäî Ï∞∏Í≥†Ïö©ÏúºÎ°úÎßå ÌôúÏö©Îê©ÎãàÎã§.</p>
                            </div>
                            <div style="display:flex;align-items:center;gap:16px;">
                                <span style="font-size:9px;color:#94a3b8;">CopyClean Confidential Analysis Report</span>
                                <span style="font-size:11px;font-weight:700;color:#334155;">1 / {{ 2 + contentPages.length }}</span>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- PAGE 2: ÌîÑÎ¶¨ÎØ∏ÏóÑ ÏÜîÎ£®ÏÖò (Dark Mode) -->
                <div id="page-2" class="pdf-page" style="padding: 0;">
                    <div class="p2-container">
                        <div class="mb-10">
                            <span class="p2-highlight">PREMIUM SOLUTION</span>
                            <h2 class="text-3xl font-black mt-2 leading-tight">ÎßûÏ∂§Ìòï Ïú†ÏÇ¨ÎèÑ Í∞úÏÑ† Ï†úÏïà</h2>
                            <p class="text-slate-400 text-sm mt-2">Ïπ¥ÌîºÌÅ¥Î¶∞ Ï†ÑÎ¨∏ ÏóêÎîîÌÑ∞ÌåÄÏù¥ Ï†ÑÎ¨∏ÏÑ±ÏùÑ Ïú†ÏßÄÌïòÎ©∞ Ïú†ÏÇ¨ÎèÑÎ•º Ï¶âÍ∞Å Î≥¥Ï†ïÌï¥ ÎìúÎ¶ΩÎãàÎã§.</p>
                        </div>

                        <div class="flex items-center gap-2 mb-6 bg-slate-800/60 rounded px-4 py-2.5 border border-slate-700/50">
                            <svg class="w-4 h-4 text-slate-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                            <p class="text-[10px] text-slate-500 leading-relaxed">Î≥∏ ÏÑúÎπÑÏä§Îäî Ï†ÄÏûê ÏûëÏÑ± ÏõêÎ¨∏ÏùÑ Í∏∞Î∞òÏúºÎ°ú Ìïú Ìé∏Ïßë ÏÑúÎπÑÏä§Î°ú, ÎÇ¥Ïö© ÏàòÏ†ï¬∑ÎåÄÌïÑÏùÄ Ìè¨Ìï®ÌïòÏßÄ ÏïäÏúºÎ©∞ Ïú†ÏÇ¨ÎèÑ Í∞úÏÑ†ÏùÑ ÏúÑÌï¥ ÌëúÌòÑ Î≥¥Ï†ïÎßå Ï†úÍ≥µÌï©ÎãàÎã§.</p>
                        </div>

                        <div class="grid grid-cols-3 gap-6 mb-10">
                            <div class="p2-card">
                                <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Improvement Goal</p>
                                <p class="text-2xl font-black text-white">Ïú†ÏÇ¨ÎèÑ 15%<br>Ïù¥Ìïò</p>
                                <p class="text-[10px] text-slate-500 mt-2">ÌïôÏà† Í≤ÄÏ¶ù ÌÜµÍ≥º Î≥¥Ï¶ù</p>
                            </div>
                            <div class="p2-card">
                                <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Estimated Duration</p>
                                <p class="text-2xl font-black text-white">Í≤∞Ï†ú ÌõÑ ÏòÅÏóÖÏùº<br>1~2Ïùº Ïù¥ÎÇ¥</p>
                                <p class="text-[10px] text-slate-500 mt-2">Priority Ï≤òÎ¶¨ ÏßÄÏõê</p>
                            </div>
                            <div class="p2-card bg-blue-600 border-blue-500">
                                <p class="text-[10px] font-bold text-blue-200 uppercase mb-2">Final Investment</p>
                                <p class="text-3xl font-black text-white">{{ formattedPrice }}</p>
                                <p class="text-[10px] text-blue-200 mt-2">VAT Î∞è ÏàòÏàòÎ£å ÏùºÏ≤¥ Ìè¨Ìï®</p>
                            </div>
                        </div>

                        <div class="p2-card mb-10">
                            <div class="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
                                <h3 class="text-lg font-bold">ÏÑúÎπÑÏä§ ÏÉÅÏÑ∏ Í≤¨Ï†Å ÌîÑÎ°úÏÑ∏Ïä§</h3>
                                <span class="bg-slate-700 text-[10px] font-bold px-2 py-1 rounded">VALIDATED PRICING</span>
                            </div>
                            <div class="space-y-4 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-slate-400">AI Ïú†ÏÇ¨ÎèÑ Í∞úÏÑ†ÏùÑ Ìè¨Ìï®Ìïú Ï¢ÖÌï© ÌëúÏ†àÎ•† 15% Ïù¥Ìïò Ïù∏Í∞ÑÌôî ÏûëÏóÖ</span>
                                    <span class="font-bold">‚Ç©250,000</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-slate-400">Î¨∏Ìóå Í∏∞Î∞ò ÌëúÏ†àÎ•† Í∞úÏÑ†ÏúºÎ°ú Í∏∞Ï§Ä ÏàòÏπò Ï¥àÍ≥º Î¨∏Ï†ú Ìï¥Í≤∞</span>
                                    <span class="font-bold">‚Ç©50,000</span>
                                </div>
                                <div class="flex justify-between text-blue-400">
                                    <span class="font-bold">Ï≤´ ÏßÑÎã® ÌäπÎ≥Ñ ÌîÑÎ°úÎ™®ÏÖò Ï†ÅÏö©</span>
                                    <span class="font-bold">- ‚Ç©5,000</span>
                                </div>
                            </div>
                        </div>

                        <!-- Payment & QR -->
                        <div class="p2-card flex items-center gap-8">
                            <div class="flex-1">
                                <h4 class="text-blue-400 text-xs font-bold uppercase mb-2 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/></svg>
                                    Payment & Next Steps
                                </h4>
                                <p class="text-sm font-bold mb-4">ÏïÑÎûò Í≤∞Ï†ú ÎßÅÌÅ¨ ÎòêÎäî QR ÏΩîÎìúÎ°ú Í≤∞Ï†ú ÌõÑ Í∞úÏÑ† ÏûëÏóÖÏù¥ ÏãúÏûëÎê©ÎãàÎã§.<br>ÏôÑÎ£å ÌõÑ Í∞úÏÑ† Í≤∞Í≥ºÎ•º Î∞òÏòÅÌïú ÏõêÎ¨∏ÏùÑ Î©îÏùºÎ°ú Î∞õÏïÑÎ≥¥Ïã§ Ïàò ÏûàÏäµÎãàÎã§.</p>
                                <div class="bg-slate-900 p-3 rounded text-xs font-mono truncate border border-slate-700">
                                    <a :href="paymentLink" target="_blank" rel="noopener" style="color:#60a5fa;text-decoration:none;cursor:pointer;">{{ paymentLink }}</a>
                                </div>
                            </div>
                            <div class="bg-white p-2 rounded-lg">
                                <img :src="qrCodeUrl" alt="Payment QR" class="w-24 h-24">
                                <p class="text-[8px] text-slate-900 text-center font-bold mt-1">SCAN TO PAY</p>
                            </div>
                        </div>

                        <!-- Confidentiality Policy -->
                        <div class="flex items-center gap-4 mt-10 bg-slate-800 rounded-lg px-5 py-4 border border-slate-700">
                            <div class="flex-shrink-0">
                                <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.999L13.732 4.002c-.77-1.333-2.694-1.333-3.464 0L3.34 16.001c-.77 1.332.192 2.999 1.732 2.999z"/></svg>
                            </div>
                            <div>
                                <p class="text-[10px] font-bold text-slate-300 tracking-widest mb-1">CONFIDENTIALITY POLICY</p>
                                <p class="text-[11px] text-slate-400">Î≥∏ Í≤∞Í≥ºÏÑúÎäî ÏùòÎ¢∞Ïù∏Ïùò ÏõêÎ≥∏ Í∏∞Î∞ÄÏÑ±ÏùÑ Î≥¥Ìò∏ÌïòÎ©∞, ÏûëÏóÖ ÏôÑÎ£å ÌõÑ Î¨∏ÏÑúÎäî Ï¶âÏãú ÌèêÍ∏∞Îê©ÎãàÎã§.</p>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- PAGE 3~: Î¨∏Ïû•Î≥Ñ Ï†ïÎ∞Ä ÎåÄÏ°∞ Í≤∞Í≥º -->
                <template v-if="contentPages.length > 0">
                <div v-for="(page, pIdx) in contentPages" :key="pIdx" :id="'page-' + (pIdx + 3)" class="pdf-page content-padding">
                    <!-- Ï≤´ ÌéòÏù¥ÏßÄ: ÎåÄÏ†úÎ™© -->
                    <div v-if="pIdx === 0" style="margin-bottom:12px;">
                        <div class="comp-page-title">Î¨∏Ïû•Î≥Ñ Ï†ïÎ∞Ä ÎåÄÏ°∞ Í≤∞Í≥º</div>
                        <div class="comp-page-subtitle">Original Text vs Reference Comparison</div>
                        <div class="comp-divider"></div>
                    </div>
                    <!-- Ïù¥ÌõÑ ÌéòÏù¥ÏßÄ: Í∞ÑÎûµ Ìó§Îçî -->
                    <div v-else style="display:flex;justify-content:space-between;border-bottom:1px solid #cbd5e1;padding-bottom:8px;margin-bottom:12px;">
                        <span style="font-weight:700;font-size:13px;color:#334155;">Î¨∏Ïû•Î≥Ñ Ï†ïÎ∞Ä ÎåÄÏ°∞ Í≤∞Í≥º</span>
                        <span style="font-size:10px;color:#94a3b8;padding-top:3px;">PAGE {{ pIdx + 3 }}</span>
                    </div>

                    <!-- Comparison Cards -->
                    <div v-for="(comp, cIdx) in page.comparisons" :key="cIdx"
                         class="comp-card" :class="comp.type === 'ai_similarity' ? 'card-ai' : 'card-plag'">
                        <!-- Card Header -->
                        <div class="comp-card-hdr">
                            <div class="comp-card-hdr-l">
                                <span>Î¨∏ÏÑú ÎÇ¥ ÏÑúÏà† Î¨∏Ïû• (Original Text)</span>
                                <span class="comp-badge comp-badge-l">ÌéòÏù¥ÏßÄ: {{ comp.pageNum || '-' }}p</span>
                            </div>
                            <div class="comp-card-hdr-r">
                                <span>{{ comp.type === 'ai_similarity' ? 'AI Ïú†ÏÇ¨ÎèÑ (AI Similarity)' : 'ÎπÑÍµê Î¨∏Ìóå (Reference Content)' }}</span>
                                <span class="comp-badge comp-badge-r">Î¨∏Ïû• Ïú†ÏÇ¨ÎèÑ: {{ comp.similarity || 0 }}%</span>
                            </div>
                        </div>
                        <!-- Card Body -->
                        <div class="comp-card-body">
                            <!-- Left: ÏõêÎ¨∏ ÌÖçÏä§Ìä∏ -->
                            <div class="comp-card-body-l" v-html="comp.formattedOriginal || comp.originalText"></div>
                            <!-- Right: Ï∂úÏ≤ò / AI Ï†ïÎ≥¥ -->
                            <div class="comp-card-body-r">
                                <div class="comp-db-title">{{ comp.type === 'ai_similarity' ? 'AI Pattern Detection' : 'CopyClean DB' }}</div>
                                <!-- Î¨∏Ìóå ÌëúÏ†à Ï∂úÏ≤ò -->
                                <template v-if="comp.type !== 'ai_similarity'">
                                    <div class="comp-src-box" v-if="comp.source">
                                        <div v-if="comp.source.author"><b>Ï†ÄÏûê :</b> {{ comp.source.author }}</div>
                                        <div v-if="comp.source.publisher"><b>Î∞úÌñâ :</b> {{ comp.source.publisher }}</div>
                                        <div v-if="comp.source.url"><b>URL :</b> <a :href="comp.source.url" target="_blank" rel="noopener" style="color:#3b82f6;word-break:break-all;text-decoration:underline;position:relative;z-index:10;cursor:pointer;">{{ comp.source.url }}</a></div>
                                    </div>
                                    <div class="comp-quote" v-if="comp.source && comp.source.matchedText">"{{ comp.source.matchedText }}"</div>
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:auto;padding-top:6px;">
                                        <span style="font-size:9px;color:#94a3b8;">{{ (comp.source && comp.source.fullReference) || '' }}</span>
                                    </div>
                                </template>
                                <!-- AI Ïú†ÏÇ¨ÎèÑ -->
                                <template v-if="comp.type === 'ai_similarity'">
                                    <div class="comp-src-box">
                                        <div><b>ÌÉêÏßÄ Î™®Îç∏ :</b> Curvature¬∑Log-Probability AI Engine</div>
                                        <div><b>Ìå®ÌÑ¥ Ïú†Ìòï :</b> {{ (comp.source && comp.source.patternType) || 'AI ÏÉùÏÑ±Ìòï Î¨∏Ïû• Ìå®ÌÑ¥ Í∞êÏßÄÎê®' }}</div>
                                    </div>
                                    <div class="comp-quote" v-if="comp.source && comp.source.matchedText">"{{ comp.source.matchedText }}"</div>
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:auto;padding-top:6px;">
                                        <span style="font-size:9px;color:#94a3b8;">CopyClean AI Detection v2.1</span>
                                        <span class="comp-match-badge">AI Pattern DB</span>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Page Footer -->
                    <div style="display:flex;justify-content:space-between;align-items:center;font-size:9px;color:#94a3b8;border-top:1px solid #e2e8f0;padding-top:8px;margin-top:auto;">
                        <span></span>
                        <span>CopyClean Confidential Analysis Report</span>
                        <span>ÏÑ±Í∑†Í¥ÄÏª®ÏÑ§ÌåÖ</span>
                    </div>
                </div>
                </template>

            </div>
        </main>
    </div>

    <script>
        console.log("[CopyClean] Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎìúÎê® - Vue Ïï± ÏÉùÏÑ± ÏãúÏûë");
        const { createApp, ref, computed, watch, nextTick, onMounted } = Vue;

        createApp({
            setup() {
                console.log("[CopyClean] setup() Ïã§ÌñâÎê® - Vue Ïï± ÎßàÏö¥Ìä∏ ÏÑ±Í≥µ");
                // ==========================================
                // 1. CONFIGURATION
                // ==========================================
                const apiKey = "AIzaSyD_f1EMwe5YvzKRvIqUyHzYSuz_w34w4y4";
                const logoDataUrl = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAwCAYAAADab77TAAAlMElEQVR42s2cd5RkV33nP/feFyp2de6enumZ6Z4cNGqNMpoZZSEsgcgcwhIMToBhza4Ne+z1AgJsjjHYxyaYZJs1EiJbBglkCRRHo4hGk0eanDrnSu+9e+/+UdXVVdXdE+T12a0+PT31wr3v/sL3F+7v94SJjLUAgtLHWhAgENjyocopLJWDAEJUrseK2jEqN4qq74LaAapHrz1isYiqc7bq+Mz/SnOWvs+emx1TUDu1rRt/9r7ZWernrJy11c8nsNWDV9ODuuPzHaueVVTRp3JcUDvp2Y7XPVzdtbJyqS3TCgFWVC6ZudxWbq5iiK1avLCzRBKiIiSiitFiDlNFzchUCdKMgNnyTzVxK+ybHXxW+Gz5gWz5vtmFIbA1M1fuq/zOFTZs/bPPClJpnXWrqmN6ZT5Rpp2om6Pmelv1186l9xxmzve99iOZZ8g6Gasby9bOKer+YwXW2irCV5+zFQaJ6pmsrdIWW0fOWaZawFpbo3FUM62aeHULsNZWmFMDWTWaaev01pZBp4oyojSPqBMAhKgRwxphteX5xfygJarEdn4Js2dh7kICYGcYXCc1wi4InqJeoKpxz9Y9hJ0BwRIDSpeKMoNq56wmWElzbZkhtlZjasRmVsLnYIAVsybDVsuRqNLwssCJWeLWsteWgaDMPGGrxMDWkdqWhZe5EGqrTIe18ypcZTwBC0rogp8FkKd8TtZjtrU1U1aYNKMFghniVUOlqCxmlg3V38vjVJmMaqbYeewc1I5VAVJBNUhXRhDVQidm/YjZ56iaX8xqop1H+G2VtiLmgtSsANtaCz6zSDEfwWcXL+x82mJnTeSc9S/0ESwIC7MQbec8hKi+sQY+mdUsW9KysrmtrGuui1Krr9ULE1XmbxZCqbNVtTA8a6MrSlj2GWyt9FhbRwZRa0mqRKxyr5ifVLU+QBWD7AIOlp3PPtq544la2tsarbULGE7mNQQLfZy5N4oaFDPlBxZSIKWsPIIxBmMtssYXFRVmWKohss4bFAJh7QKPVfaOK7a+2lOfJaytX5itdX5mbLUQC0u3xZR/q4V7xrTI8jeDtRYpVJWQzuO1WqrWPo93Xe9x2/m1+9xwPJ/gLQznQkemCjBFxYQZY5BSIuUscXRYQBuDkgrl+pXjkdbICtrPs/i6BYoZe1gns5zDBIkq8td6R/MQcJ7xxIzsYDEYpHCRCyCgtWBsiJJu6bsJymZJYsq2fBbi7QLm5Xxs6Plcf74CsKAGVzsiFmMsjqMw1rLjwG6273uRo2MDjAV5QiWJJxJ0NjWycVE31/asZ0mmo6TpZt4AgVpW1no+9pyLqvIEhJ0NyexCocb89JoJ1Uuhk8QRioIZYCj3DGPF58hH/QgiEm4zTf56WrytxJxejo/388TJb3FZ7y601SCaWO7/Nb5IY62pMjm2SgBfCTMunHnnIyhlDZ5VeAkIJXn4wH7+7gd38eyBfRSEwEs3EMuk8RuSyJhPpAxWWdpbG3hP72bed8lWjBAzeQfEjF2sjlyq0VeIslNS62CJakYiEMJW5QHOoanznRe1ds1KSdGO8PyZf2bX8M/JRYMoYXGlwJEWJTWutMRdnyu63s+XfzHJzjP38Dfv7WIiP4kRHfQ1fIekymCsqV3fDEDbV6B056Xw8ynJ2QdzZr6a8t88gk/++hH+4StfIDc0SlNzM8lMhqTroQyIXICLoKG5ATeT5Ewxy7fuupv3XnQNuE4FrsyMbSv7CVLM2vYaB9vO49BUFNRUPPaa7JidD7YX0OSqzFwoIoaDfdz30mfZN/wkaaeRlJ8i5kuSnoMjBFKEGGMphBM8d3oHJweacCOfKEqgdYQhUevy1UREdj6X5ryCG3FWNJs/xp1LEFHnmNkSg2eCf6kkH3/yGb757a9hB0dIJBIYY5gaHaX/+AACD2UMJgiJdEDHhmWMTQ7xni2vQfouQRCiVMk5UUrNebxIawSU7HUFdsWcZIQUYtb2W9BGl5IYFcdJ1GWhZhyx0l9ja7FZCUloixwr7uSXB77IgeGnSXmtRFgmgojx3CJGJiOKUUg6Bu2ZgMaYoV1dz1T2aSLHUogU+XA2NVqjoaJk1WtzRxqBrEn51jLKVGLsmZBLlKlT7QRW/CMhK/Bnq5RHlP2Chbx2h7Kn7DiKe46c5Hv3/QR59ChRLE5kDPnRMRpijbxp242sWdROTEmy2RxHT57myRf34uLyO+9+dyVkmmHs8MQQZ7IjFIKAmOOypLmDpkRzaem6xLBSWGUQxoByKouzOmRoapRARzTHG4j7aTAWVJmqOgIpS8QxVPxgsAgpcISsIac2ISfzB3jy9D3sG3we322kYEImpkHpq3CL7YjIYsI8e4+f4MHsId5w2a1syfRhzKN4XoyithR1tWdfFjEBQiiUmGUsKEBiDVii2XXZ0pNK6aDEXAWwGgxRhWFKVblIBjQhQrgoqWqP2wiBqs2bl5/TsVikkOQLAf/47LME+/ZStBLXWorZPJ1+ks/+4YdZvaizFHpYSxiGZNet5o4bt3Fp3yW0NjURhhGu63Kk/yTffvwBnjp1jDEToQU4GNobGrhqaQ+/fdn1dDV2YK1l5+493PngPbSuWEzcGD665Q5ODA1y156nODo9graGlmSMrctW87tX3sZzT7/IX/7yHtZev5loIod0BB+9+rV0pVswVpdgWBvu3fcih07vwaLJas1vrV/PgeJ29g48S2hjYCwTQZEu9zY2tV1NQklc5RJFEdlijqzOcfPaVzMxNorn+DixGPlQkw8NyqndrJBSUrRjDE4/xGDuCfJ6GKUkzf5KelLvwpc9aFtCrhmGFfUxhgvPMlLYQ2hGQTg0+j10J27Hk8vQJgIB/dO7COxBhIQW/woSzjIic4YjE48wVNiHJ1P0pG+lyb+ohHJzAnmLY41FSdh1eoA9u3ejx8cRUmCMRU9O89EPvZ9rL7mEbC6H7zrV+Q9aW1poakgRhBGe6/DU/t187Dvf4GR2moaWJlTMR0nwGjIMZovc9dRTPPbyfr74xveyoX05R48e49kX9pCUEXZ6mlPDYwyEEVNAIh4HaxkbnOI3Jx/l5ekJNk+l+Nld93Kg3cezirHsBCvbuvndzTcSGYPvujxy8CCfuf/fCMaPMhaFrFrcwdq2GD858K8s6soRGIdimEfpLm5Y+mpaEmk8J4YjSsQ3VpPwU7SnmhgZGsB1fFzfJx9G5EONY3WJtVIQkOXl6Sc4MvI9zkw9i69cHKXQNmK/3cHB5P1s6/wSGedKQDNYOMCRye/x0vi/kwvHygAO2hqEDGmMf5vrur5Im38t333x0+wa/AlL23JMRaNc1P56NrW8hZ8f+V8MTJ8EFJYiCf/L3NHzRVZn3ojWURVcl8MkbQyOgZ0nzzB88jQiCEFIgmKR9tZWbrv+RlKJBKl4vAyrpfyt4zjE/BhhmbnHBvr5r9/4MsdHRmhua2HqxGns6Sn8yDBKnrYtl9Dc3MjxkTH+x31389U7PkAunyctXPxIIK3DgcFBgsk87nCOM6PjpFYupnH1cjwDv3hxF2L5Gq7tXcvh5w7Qfu3l2HyRhw7v53191+IohdGa+/fsIqXzTGnwjeBNGy9l557djI8O0bI0TVg0TEcBm5ouYn3nWqSweI6PFLKS8neVh5KluN71HBzXIx9G5LTFESXEK+ocX33mS8TTz1AMTxFzMkwUJegULUlJzC3QPznEr8yf8oZlP+X5gRf41AMf4uqVhrbWJEo1o0QKX4B0CkwXAwanJ3no9J3c3Lmc4+MnGMsK2pu7iGyS3cM72T26i0I0ScxtI4jAWsl0Icu/HvkcH9ywlYRqxVhTs3HhRFrjYDk1MEQ4OYFjyiYkCFi6YgXLu7vBmsqGgCj/I4VAljcQtNZ89d4f8fLJUzQ1ZhgZGqLPaeK6W7cxXShwcM8+dtz7CM1vuI60G+fFIyf4l2cfY7lUFAsBMhdCqPGKIVfSRKZzMSei0zz240cIbsnStGEVsYLl6TPHWLNxLTt/9SDFKy7ClYrdx47y1MmX2LJ0HbuOHeXZQwcIpyaYLgZkUgnWdy7lF/fdg+rSFLAYIchqS3dmJR2pDoo6jye9mjyAEg4GXcreORIrJbkQcpHFRaCU5Uu/+ht+c+qn3Hp5M0UR4/iY4uiJ5ZwZHGdk+AVefWUb69Y0c3LyNHvG7mYiu5jhIcujuSyb1y7ixECSkWnL0NBLLM0E3HRNF0I0cGLyNHvdf0eYNCNTRaYDKAiD0BHZIGRqLEEilCxqU9h4hA0TDEwN8/L4U1zcdjtWm7I9LjPYGENkNLl8AR0ZlC2HJlqTSqdJxF2CICpJuJi7keQoyd6XXuJXzz6DqxTZfJ6UEXz4Xe+gsaWZyclJOpd0kS0U2Lv7EOmL1uCElif27aWpcTk20phCSKGQpSvZxH+55fUUTciJgSH8VIpfbH+IRE83NtAMjYxxWVcPndZjZOcBmtauYHJwkh+/8Cxblq7jgb17GB/px+SmyOmQW1eso8GPc7p/mFSbIRQCjaCIIe014Ls+1hoc5c6GWLK8JVl2yrUxmMiSjTTTgSFmYNfpnXz3we/x5lsWMRVGZCON1ZtZ27iCtBrh3/Ye4e4f7eNP/2QLgfZ5fuBRupy3cnnvNQznpokme+mJ+yzyNbsLTfzkvn+hNZPhor400zk4MX6CXEFzamSansVtaF+RDw0pex0J08Sze36G4/Zzy7ZeQpFlOrQM5E/NG385WAi1wcVAWIqGrbEgJcMTYwRhiKNU2Uuu328tZb127dvPmaEhRDzGdDbL2u5e1q1aRSEMaEql8D2PQ2tWcXDP0wTZPISGkbExJp0WiCLCYoFivoDb6LG4q4tAhyRicQbWDbP9mcfJDo3hxTyCoIBpllx62RX8ePuvyPR042jDw7ue5+iVN/DUvn2QnSJXDPAcuHXdZnJBQBhZxsdztIsWIguRtWSjSaywCCmrNu6rMtzl+FlrQxhpcpFmOjIYY3l011MMH+/HT3YzHhaJIofOxiKxxqMkilne8dqVZKfSjOQCAutgTZ7lDR7XrdxKYAyIgCk9wFChn77miGWd19OQMQxMFZiKBP3Zacam8gwMZsmFBusIJouSi1vWEUu2MjB8koee/hHLlxVZssJlOrLkwrBu/30mTLKWyBja47FyUkFijEE4HodOnuLlkydYt7yHKNI4UtWFH4Z8Mc/p/kGKxSLK9ygUisR9n872NqZyOaIwQgjobG/DOeAQ5ApEUUCoChSLIdZYdBARFkM8x6GzrZ2pfBZHKpYtXkwmnWY8ly/FsvkATzls2XoNP3/8EaaOnMJPJxkbGeXzP/kBg8ePUCwUmM7nuWTVKjZ197Jv6ChNbR3sP7GTZdFitCnloPeP70QgkEJW4Ggm2TCzOWmMAVOiT1YbctqC0YyeOEUwlmNKRxS1wbGKcb0PKUKEY2hf6oJSFLTGWJgqhCzJLOPE9FGG9ClOhns5kzuMVCG+UGR60hRDwVTekkOQDgOmpgvkJkKKWhBGUNCWpanFZEQXGb8ZKXyCUFDUgkIEgbbzFAiAY60l0oaVbU1k4nGmxiVYjeM45Mcn+dL37+IbH/8zPMcljKKK9kohcJVDTufI5gOEEWAsVmvyUUA85iOlIooiLBbf93HiPtP5PFpH+F4SISQ6MohiRBRECAPxRAyhJFhLKhHHTyURFsJ8gWK2QHu6kbUrl7NhzXp27j5E1zWXQEHz8O5naXFiFIOAYpDnjVdsIRn38aygd9Uatv/bfUwOT+ElfXyZ5PmR7ewf28napospRoXKbtHMnpIjfKwpJRUia8kZS84YrNDoMGRqosDg5DROSqHDkIOnHZROIIXECo0lJLSa6SjLOzZexWMHn+Dbz/0Dq/saGJweRlqXyYFGsiMOZ/YdYN3mZro3tzA8ZWkShnwYUciHFCNDaKCoNUsau2kUHXjSwY07WEeSjyBnILBzK1RmUs9oYFl7K1cu78ZIH0cKIm1QiSTf/NFP+fNvfo2J/DSu65R+HQelFIcHTrJj/y4yDWl84WIwxJXL0YF+hqbG8P3S9Z7jEKHRvkOUL1DIFlgUT5PwfYIwQochURDgOBKpBPGYTyqVIp+bxmnJEEUGnQ8QxZC1i5bQnGng2muuRA9nKY6PY7RGa8Ngdop8IUdXYyu39l1JIQxI+jH6etfhtazm+O4JhAKsJDKGv9n9ZwwFR/GdGK5ycZWLo1wCJ8/xYA+RzKGEQmtDITLktaUYGVJ+mnDacKY/SygFU1GIG7XSMH0FYnwtdmwtzlQfqcKVXJp6J31tN/EX//xXuKpAYDVCeOjxJazRN9OTvpbjL+Q4fWiSSDrkippQW2wA0bQh0hAYCLUk6TUQd2N4QqIciRaSgoZ8JNCmbs+4bHUcIQRKCpKJJG+7ajPb9x+iMNWPDLIYK5COx51f+wY/ffgRbrriMro72skGAS+dPMWjL+zEWsMn3/5eOv0UL4dTOH6M/qFhPv6Nr/AXH/h9OjItDE+OsOPUYQbHJ/Bcl+z4GLdsuoTiZB5jLVEYkBAOTx/Yz/9+5H7edNV1TBcn+c3pwwy7gjCbIzSG7mQDl65dR6FY5Mq+jaxfuoK9+w7TsnoZ0xPTSCGYzhd453VX0d3WzvHh0yTjCVa3drFlw7X8ate/0rRkipbuNG4xzp6hg3zw4Xdy27LXsqpxDUq4nMn1s2t4N0+ceYQ3LH4b0niMZ7NkI0E+AiXyLOvoIplZzIu/Pk7rukuIjKKpa5Kb073Eo8UUdIEJPUl//gTL2hp55tBTHNp1mPYNyyhoy3hQYFPrUm7OXM2OY7vJNPh093QxnQ8INBgJYcEQ5jSRkRSjkmBpa3Achec6GMdS1AE5LclrgbbzFww6QpRyw47jcsnqlbx/21X87c8fxFEGxxaJjEX5MXbtf4ld+/aDUpXqBS8eJ4iK/OSJR3nVxj4O/Pu9xFYuImYT3H3/A+zYuYtVyxZzcmiYl06eJh73OTM2wOsuupzfetVW7vnZz7HWEgUhyhimsnn+8O+/zN//6Ed4jsPhwWHCUOPHPEaHh7nz9W+nvaWVgeEhutrauGHrNey86zuESwpobdHWoJTDm7fdiLYGz3FJeHFaU028pW8rR0dO8uLDz3PJ9QVaumN4hTj946P8/fDXUBIkCmMkoAhlxC/O3I/O9XBw936Wre/FRIoxxjnc9CR9N76KJ372cw4+O0DvJR2cHp/kp/pu1mc2kXCTnJg6xUv5AzzX73G1cwuCGEd2j9Da144wLkfsTk4ne4nc49zy/k04PYKxsUmMAcdRRIFBFw2hNhQjCHTJR5AIHOWAsEQGipEhiCzWyJqStJlNOkdKhVQa11GkU2lef83lhMUi331kOxOFCVw3AqNRiThCSqwQCFnafwojDVN51rZ1cFXfZg4eOcqOo/tQ7WkaMmlOjYxw+MwZHEfhOpLBoSGu6lnHJ9/3+1gp8Hyf0ApsEGKkQE9M4/kuh0dHiYoRnqMwGE729/PeLTfyrtfcTjafJx6L0ZBOc3nfRpY/0MHQwCiqIc341CTbNvVx+Zp1FIo5Yq6H1pqGZJKVHYv5vatexzefgBcf3k/nhkmWLI+RirvE43EiozG2tAGgIwOBw7pYH/1Jn4ljhiN7x1h8UQZZhKdGnuDSNW9mfPR2nnzgSbKhoHddmrFwkgcHHyxlqIQkJGBytMClbRGXb72N7dt/QeMzA3RfnCEbTvOdY9/Cj7kEyjD9dJZFq9qQvsOg6Wc6l0dGYBVE0lLQQamwwi3lHZQWSCOIlCBCEGk9t4IZcIQUSCVxlCLmebS3tvHW669h1eIO7n/6N+w6cZKJqIDWIdaEJcNtISF9ehd18qZ3bONtr76J8ckp3v2WO1i2YzHbd+9iMMgS82PEYj4IQdLxeNO12/id176OzvY2wqCA78cwlpINxtKgfFJjESOTY8hMkrAQ4QjFH2x7DX/8rndhAMdxEVKQTqVoa2oiGXcZd6FQCAjDiHffeBuuqygEAuU4eK5Lwo/R2pTh4qUr+KPY2/j1y8+x49hOdp8cwk8VSDaEJJIOrnKJiwRL/OVs7d7CLcuv47loL09deZLnntnD8ZEsyaRhUaqLzes3su6GTfzguUZ27HiRY4em6e4VpBs9PNdDaUks6OANK+5g26JXkdmym5FAs/uJfQyO5+jscfAdj6Rsxh5PsPPh5zh9pp/m5XFWLk1RjMYJ84Zjp7LkvRy+9PCVh1ISbQ0j+SzHBkdxhaR/dAx6FXUb62UNFqWtPcd18KwlDSjZwbZUik0rejl8ZoBjg0P0j45RLBZxXZfWdJqezjbWr+iho60VCzQ2pNmwspeOtha2XrmZIydPMzadRQpJU6aBDb3LWdvTQzwRx/M8MBGu6xAiQFuCoMjyzsW893U3cvjkKQJjaWnM0Ld2NVdcfBENDWmUUigpsKEh09DAwUOHGIzy5B2XbHaalV1LuP3KVxGGGtdx0Ubge35ZM8HpUCTjMZY0tXPD6ks5NNrPwNQ4+SjAVS7tiQzLmjpY3tpJR3MjkYhY3bWUT1z3Vn5z6jDDkxOkfI9b1l/J6q4lnIkP8aFtjdy87jJe6u9ncHIElbe0NGRY0tBGb3c3Gzt7ScZjbF62lv/5mkaeOvoSh06fQp2KWJJpZnVbL6k1SfrarmOiMMWyxjZet+I6HjdPsWpRH0LF0TrgLVfexPLGZUzlJtnU1ccdm95DUDQEYwHv3LiJt298BzrSpV2q6kRHyclSWKccIssSw33fJ5FI0tLSQl8YEJVDJNdx8FwPx3PxHBfPd/E9D6M1UkpiMZ+2pkbW9faU0n5S4nk+vu/j+zGSiTie56IDhev6CCkx1mK0IRFPsOXyzWy+eAOe45JOJsmk08TiCWK+j1vea/Zch0hr7n/yCfK+Q5AvonN53nDVVpozafKFIkpKhHIqFTVSSJSj8DyPZCpBS1MDaxYtJSLCYBBC4joKz/WIx2IkY3E85RJTcS7qibG6czHGGmKxGPFkDCkEi1rbyCTTtDe1ckXPGrQxIGWJRp5DPO6TiifwlENTQwZXenQ3t1O8KMAai1AK13NQUrKmdwlSClzPQ3mS6ze8is29fRSCAp7nsGLxssq++DUrLmVVywqm8lmkI1i/ZBUNsQaMNnMKDEoQDTgohChtfymlcMrwpo3GmlIGByidl6XzrlfaPUGUGOS4DjHto7XBGFPZwFdK4boevu/jeW4poe8qlJJkrUW5ClOASAoWd3QQaI2jHJTj4Psecd/HdRyEEGhj8H2PXz38KI8d2E1eWgrZaRzP59233o4xJaGSQpYqL6TAcwQSiXJLa/I8j2Q8QRhGpfWV95GllPiuS8zz8V0PiSBwQ3zPJUonsViUVHieiyMlYRQR932CMEEQRKXEiBQlT9f3yuO4CCyOUniOSxAmiHSEAZSSuI5bTonqUvztOviOQxRF+L6LIVMSTMctKYxySMRitDdlaEqncJSL76iSfa7Up89WoTqi5EaXMjqyVElRmtjBGBdjbYVRpWoLhVQlrVdKViotjDK41qmU01b3UykhUcrBcRSyzCSlHFqbGrn2oj6kkgSFgNdeczUtzc3kigGuo0qQrKrmAUQ5V/wvDzxENmtIppK0Nmf44/e+hw29PVVVJTNep0RIB+lKHOOgHRff00RaY4xG21KN90wFqZIKV7o4UiEQeG5EFItKAi5KXqySpXUYqwl1RFgey5azYTP0c5WLEgpjSyYj9CK0NaVUcEVZZKWaxUKJrlLOdnfYUjrVd3wEEkc6pGIJfM8vl0JJPMcrNyTMbZYTURhZW1Xgbq1Fa11JuM9MMFNrXF2KU13PNlNPZEy5VUXKcoWmQUhR3mosC4MxaK2ZnJxkeGQUrQ2JRILuri6koyoLVkohZW0HoJKS6VyOex/6NRPjk/i+x8bVa7h000aMKUlxTdOArepHsqVyWWNLCDNbIGcrzWECgRKqsq9qZ0pkyhWUM2U4JXfVzI5nq9prRAlBZn5KI+gSc62pop+Ys38raprabCWFKstCZcuVIQaLKFf3CaFmN4PqyrVEFEY1penV2lKJqwwIUZJgHWmUo85ZJKi1qWjSfJ8ojAiCgEQsVi6/qapC0QapZKUeq65+jqlsjqmpKcIoIubHSKVSZZPi1HVXzG4BztZ81Ta72bqa8NrGGHv2LiBLuWepugRdzPlrq7pCrLB1Da5zCl3ryuhqOzSpa71b8LytZ3DZEZnKZtn+4k6ccjpSARtWruTuBx/khZdf4psf/wRD42P85sABHNfFVSVIEdayZtly7vznf+KaTZt483U3cPD4Me765S9IJRI1ttt3Fa/feh1NDWkeeeEFIl3KfftKsWppNwk/xp3f/Q6/81u3s3LxkkoNF7ZUPxaEIWEYlZ04hes6OI5TskFi/kLG2crL86lPrSf8Qg1edk7L67kK1itNhkJUsai+G0LMrQwXs30FYqGKzbll5zgVihiDdAVHTp3i9z5zJ9JxcFyXQy+/zLc++1n2HzvOQ889jzaGZ/bu5SOf/wtiiQTZfB7f9ShOTvK3f/IJfvjIo7iuy5uvu55TAwM8ufMFfM8rN65Jhicn2fHiC2z9YR8xz+Uvv/NP5Ms7UI/u3MkXPvpR3n7DjfzVXXdx6xVXsWpJd7l1pKTlEvBcF1c5lQrLEoyLs1Wp1tYrWbEgcWxdb3WpRFss0IAmZrtH66ERUdPMU2GOOPfzzWWiKMNxVc+9WABa6iponZkLhZRYY1nZ3c32b/8TSklODQxw9R/8Po3pNFJKOlrbcJTipsuu4PMf+SO+ft99fOtjH+N9n/sct7/lbbxm61bsV75CQyqFEIIgCEBHCCdRqtyUkiAssnLlCtYu76FYLPK7r30dQRQiEOx46SD5MEAAjZlGHMeZQ1UhBKqsqbam7+sCWkXE2Y8JUc+sBRS3pvNQzFF0MacJvH6cueW3c68Tc3qyxbzPLuZ2fIiq1hWtDa7ncN/jj/Phz3yKhuYWImMxWnPpmjU89PxOXjpyhPd8+lN88SMfJTCG7QcPkEo3sO/0GW7SEa7nl0KHWIyB0VH2Hj3M1ZsvxXUdtLUklMM3jh4jsJpHnn+OJa1tfPDvvsLS5kY2LF/GrZf08erLLy+3hJ29cXKO1vxfav0Q4hUKyJxmeHvu9t3zKJCft8hdnOW6umeoMFiWNXhDby/f+uSnGByf5AOf/jR3vPoWli0qldy4rseS1laS8RjtmQxJ3ycV8/Fcl+6ODoSAMNKk4nFePnqUf/zxT2hqb591brSms7ERqyM++oW/4vMf/ghGCfrWreGajRsYHBvn3scfY/WSpaRTqfOjtuD/w49d+PnsQio4jwGlLuwR9vynnqmLroY+bQwbVq0kk8nwxv/2MS7esI6vfeITABSCkHWrVvHZD36IY4OD3Pv44wyNjvKFH3yfwYkxvv7DHxBls6TicaZzea7ZvJnPfPgP+fIPf0CiIV0qDUVgrCGXzfLDP/8kTQ1pbuvrY3R4mF9u347juiRjMXraO8mH4Vl08mySPPe6BV9HIc6DWK+o6/4sc4jzaUk5f0dwfgNc8wqHmfIbjaMUX/7hD1h20w0sbu/g11//Jp3NzTMF9ChVEoJfP/McDz79NNdu2Mi9jz7OTX2baU6k6B8ewZEKzy21XLZkGmluasJRCiVK0jQ+McWvn32O0FpaGpv4ysf+O9L1ecerX8N3P3knX//En3L1xovoaW+jJZVaADbtBamvfYWab+fcbC9MgcWFwIs4+xTnJWjVXfiiqn203BymtWZ55yLu/usv8dabbwILYRThKsV0IY8RAiUlb9y2lTdv24q1Fs91sVhi8Thjo+N87p7vE4YBACNTk3x/x5O89vLLcFSpfKe9uZG33HIzMc8DUUrrPbZ3D0sWdbJ5/XqCMCQSlq9+6EO0ptOlnK2Qr7CF8j9ml8UrhX9B7dsGxLnaCasgWthz3FentRXorupIEHXdhRW33lpu27Kl3P5jyqlJidGGlnQDukznRDxeSafNZoosgdGsWLSI5nS6lMyIDJ2pBoZHxpGitM3lOg5BLsvLx4/T09XFdD7P2kVdfO+BB/j544+VKjxdh9zkFO9/0xu587c/gA41jpQXAJX2wpyd84XXV9CQfX7T2lfYKmxrtLXyvao3SehI175IyFqsNUhZamYSQlAMAs4MDZNOJWjOZLDV76OasXNCkC3kmZrO0tyYwXMchkbGGB4bI1collOeotLIvaanh3QyweTUNIdPnCAIw8rrLWy5Q3DF0m46W1pK6c//NGdKvAJNP58+3XO99G0ep8raeTNWF/RM9XH8LIMFC78xzZZ3Kig1PZ9FJqUsC4kpv6JIyvmfxdjKRoas1CbPFdBSzvg8VaIe2cSFM/NCFf2VYbc9D6fAXrhgzeOa1GnwOQChvvidBfqtBXU9v3Nf3Sdq+oLnI+1M47ZcQBPs+TkdZxHaC9NucYFe7vkyWVyABy3mt89nIc8CDK56p9Oc+/8ji/t/Cav/yWGveCUMFueAH3tWRD8Xc2fDJLtw3GDPigPiFUrvecYqFxTfiAXGX+hlYf+xF4zVXDcfutrzykQskIU6y5pmOwBnEVHMc30ZIeUCSdILsBPiPBh3PrAkzpOX8z+bmFci7DzX1zNPnPccCzLmggXbnsc8dm58e7YoQVSFWGL29VVy7kRiHslnAaKIee5diNDnu2hxftpdN5Y9L22z84QY59LihQzefFou6pIN5xIEceEZGLsQEtW/H7j0+T8/8RE3cDy4agAAAABJRU5ErkJggg=="; // ‚ö†Ô∏è API KeyÎäî Îü∞ÌÉÄÏûÑ ÌôòÍ≤ΩÏóêÏÑú Ï£ºÏûÖÎê©ÎãàÎã§.
                const originLogoDataUrl = "data:image/png;base64,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";
                const paymentLink = ref("https://copyclean.ai/checkout/CP-20260201-8829");
                const servicePrice = ref(295000);
                const reportId = ref("");
                const docTitle = ref("");
                const todayDate = ref(new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit' }).replace(/\. /g, '.').replace('.', ''));

                // Page 1 ÎèôÏ†Å Îç∞Ïù¥ÌÑ∞
                const issueDate = ref(new Date().toISOString().slice(0, 10).replace(/-/g, '.'));
                const diagModel = ref("CopyClean AI v3.2");
                const selectedPlan = ref("Î≤†Ïù¥ÏßÅ ÏÑúÎπÑÏä§");

                // Page 3 ÎèôÏ†Å Îç∞Ïù¥ÌÑ∞
                const inspectionNo = ref("");
                const originalDocName = ref("");
                const comparisonTarget = ref("ÌòÑÏû¨Ï†êÏàòÎ¨∏ÏÑú / CopyClean DB");
                const totalSentences = ref(0);
                const aiSimilarSentences = ref(0);
                const identicalSentences = ref(0);
                const suspiciousSentences = ref(0);
                const citationCount = ref(0);
                const categoryRatios = ref([
                    { name: "ÌïôÏà†ÎÖºÎ¨∏ ÎåÄÏ°∞ DB", ratio: 62 },
                    { name: "Í≥µÍ≥µÍ∏∞Í¥Ä Î∞è Í∏∞ÏóÖ DB", ratio: 24 },
                    { name: "Ïõπ ÏΩòÌÖêÏ∏† / Ïª§ÎÆ§ÎãàÌã∞", ratio: 14 }
                ]);
                const generatedTimestamp = ref("");
                
                // ==========================================
                // 2. STATE
                // ==========================================
                const plagiarismRate = ref("0%");
                const numericRate = ref(0);
                const status = ref('idle');
                const isDragging = ref(false);
                const progressText = ref('');
                const contentPages = ref([]);
                const qrCodeUrl = ref('');
                const isExporting = ref(false);
                const pages = ref([]);
                const diagnosisSummary = ref([]);
                const submissionNotes = ref([]);

                // PDF.js Worker ÏÑ§Ï†ï (Ï¶âÏãú Ïã§Ìñâ)
                if (window.pdfjsLib) {
                    window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
                    console.log("[CopyClean] PDF.js Worker ÏÑ§Ï†ï ÏôÑÎ£å");
                } else {
                    console.error("[CopyClean] PDF.js ÎùºÏù¥Î∏åÎü¨Î¶¨Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§!");
                }

                // ==========================================
                // 3. LOGIC: QR & Chart
                // ==========================================
                const generateQR = async () => {
                    try {
                        qrCodeUrl.value = await QRCode.toDataURL(paymentLink.value);
                    } catch (err) {
                        console.error("QR Generation Error", err);
                    }
                };
                watch(paymentLink, generateQR);

                const renderChart = () => {
                    const ctx = document.getElementById('rateChart');
                    if (!ctx) return;
                    const existingChart = Chart.getChart("rateChart");
                    if (existingChart) existingChart.destroy();

                    // ÌëúÏ†àÎ•† Í∏∞Ï§Ä ÏÉâÏÉÅ Í≤∞Ï†ï: ‚â§15% ÏïàÏ†Ñ(Ï¥àÎ°ù), 16~30% Í≤ΩÍ≥†(Ï£ºÌô©), 31%+ ÏúÑÌóò(Îπ®Í∞ï)
                    const rate = numericRate.value;
                    const rateColor = rate <= 15 ? '#10b981' : (rate <= 30 ? '#f97316' : '#dc2626');
                    const chipColor = rate <= 15 ? '#10b981' : (rate <= 30 ? '#f97316' : '#dc2626');

                    // Custom plugin: Î∞î ÏúÑÏóê ÎùºÎ≤® ÌëúÏãú
                    const barLabelPlugin = {
                        id: 'barLabels',
                        afterDatasetsDraw(chart) {
                            const { ctx: c, data, scales: { x, y } } = chart;
                            data.datasets[0].data.forEach((value, index) => {
                                const xPos = x.getPixelForValue(index);
                                const yPos = y.getPixelForValue(value);
                                c.save();
                                c.textAlign = 'center';
                                c.font = 'bold 14px Noto Sans KR';
                                c.fillStyle = index === 1 ? rateColor : '#64748b';
                                // ÎèôÏ†Å Ï¥àÍ≥º Ïπ© + ÌçºÏÑºÌä∏ ÌÖçÏä§Ìä∏ (ÌòÑÏû¨ Î¨∏ÏÑúÏóêÎßå)
                                const avgRate = 15;
                                if (index === 1 && value > avgRate) {
                                    const diff = value - avgRate;
                                    const chipText = '+' + diff + '% Ï¥àÍ≥º';
                                    // Ïπ©: Î∞î ÏÉÅÎã® Î∞îÎ°ú ÏúÑÏóê Î∞∞Ïπò
                                    c.font = 'bold 10px Noto Sans KR';
                                    const textW = c.measureText(chipText).width;
                                    const labelW = textW + 16, labelH = 20;
                                    const lx = xPos - labelW / 2, ly = yPos - 52;
                                    c.fillStyle = chipColor;
                                    c.beginPath();
                                    c.roundRect(lx, ly, labelW, labelH, 4);
                                    c.fill();
                                    c.fillStyle = '#fff';
                                    c.fillText(chipText, xPos, ly + 14);
                                    // ÌçºÏÑºÌä∏: Ïπ© ÏïÑÎûò, Î∞î Î∞îÎ°ú ÏúÑ
                                    c.font = 'bold 14px Noto Sans KR';
                                    c.fillStyle = rateColor;
                                    c.fillText(value + '%', xPos, yPos - 8);
                                } else {
                                    c.fillText(value + '%', xPos, yPos - 12);
                                }
                                c.restore();
                            });
                        }
                    };

                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['Ï†úÏ∂úÏûê ÌèâÍ∑†', 'ÌòÑÏû¨ Î¨∏ÏÑú'],
                            datasets: [{
                                label: 'ÌëúÏ†àÎ•† (%)',
                                data: [15, numericRate.value],
                                backgroundColor: ['#e2e8f0', rateColor],
                                borderRadius: 4,
                                barPercentage: 0.6
                            }]
                        },
                        plugins: [barLabelPlugin],
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                y: { beginAtZero: true, max: Math.ceil((Math.max(numericRate.value, 15) + 15) / 10) * 10, ticks: { stepSize: 10, color: '#cbd5e1' }, grid: { borderDash: [5, 5], color: 'rgba(226,232,240,0.5)' }, border: { color: 'rgba(226,232,240,0.5)' } },
                                x: { grid: { display: false }, ticks: { color: '#94a3b8' } }
                            }
                        }
                    });
                };

                // ==========================================
                // 4. COMPUTED HELPERS
                // ==========================================
                const formattedPrice = computed(() => '‚Ç©' + servicePrice.value.toLocaleString());
                const getVerdictText = computed(() => numericRate.value > 30 ? "Î∂ÄÏ†ÅÌï©" : (numericRate.value > 15 ? "Í≥†ÏúÑÌóò" : "ÏïàÏ†Ñ"));
                const getVerdictClass = computed(() => numericRate.value > 15 ? "verdict-danger" : "verdict-safe");
                const getVerdictIcon = computed(() => numericRate.value > 30 ? "üõ°Ô∏è" : "‚úÖ");
                const getVerdictDesc = computed(() => numericRate.value > 15 ? "Ï¥àÍ≥º" : "ÎØ∏Îßå");
                const distributionBar = computed(() => {
                    const total = totalSentences.value || 1;
                    return {
                        identical: Math.round((identicalSentences.value / total) * 100),
                        suspicious: Math.round((suspiciousSentences.value / total) * 100),
                        citation: Math.round((citationCount.value / total) * 100),
                        aiSimilar: Math.round((aiSimilarSentences.value / total) * 100)
                    };
                });

                // ==========================================
                // 5. AI ANALYSIS LOGIC
                // ==========================================
                const generateDiagnosisReport = async (fullText, rate) => {
                    try {
                        const prompt = `ÎãπÏã†ÏùÄ ÌïôÏà† Î¨∏ÏÑú ÌëúÏ†à ÏßÑÎã® Ï†ÑÎ¨∏Í∞ÄÏûÖÎãàÎã§. ÏïÑÎûòÎäî Ïπ¥ÌîºÌÅ¥Î¶∞(CopyClean) ÌëúÏ†à ÏßÑÎã® ÏÑúÎπÑÏä§ÏóêÏÑú Î∂ÑÏÑùÌïú Î¨∏ÏÑúÏùò Ï†ÑÏ≤¥ ÌÖçÏä§Ìä∏ÏôÄ ÌëúÏ†àÎ•†ÏûÖÎãàÎã§.

ÌëúÏ†àÎ•†: ${rate}%

Î¨∏ÏÑú ÌÖçÏä§Ìä∏ (ÏùºÎ∂Ä):
${fullText.substring(0, 3000)}

ÏúÑ Ï†ïÎ≥¥Î•º Í∏∞Î∞òÏúºÎ°ú ÏïÑÎûò JSON ÌòïÏãùÏúºÎ°ú ÏùëÎãµÌïòÏÑ∏Ïöî:
{
  "diagnosisSummary": ["Ï¥ùÌèâ1", "Ï¥ùÌèâ2", "Ï¥ùÌèâ3"],
  "submissionNotes": ["Ï£ºÏùòÏÇ¨Ìï≠1", "Ï£ºÏùòÏÇ¨Ìï≠2", "Ï£ºÏùòÏÇ¨Ìï≠3"]
}

Í∑úÏπô:
- diagnosisSummary: ÌëúÏ†àÎ•†Í≥º Î¨∏ÏÑú ÎÇ¥Ïö©ÏùÑ Î∂ÑÏÑùÌïú ÏßÑÎã® Ï¥ùÌèâ 3Í∞ú. Íµ¨Ï≤¥Ï†ÅÏù¥Í≥† Ï†ÑÎ¨∏Ï†ÅÏúºÎ°ú ÏûëÏÑ±.
- submissionNotes: Ï†úÏ∂ú Ï†Ñ ÌôïÏù∏Ìï¥Ïïº Ìï† Ï£ºÏùòÏÇ¨Ìï≠ 3Í∞ú. Ïã§ÏßàÏ†ÅÏù∏ Í∞úÏÑ† Ìè¨Ïù∏Ìä∏ Ï†úÏãú.
- ÌïúÍµ≠Ïñ¥Î°ú ÏûëÏÑ±. Í∞Å Ìï≠Î™©ÏùÄ 1Î¨∏Ïû•ÏúºÎ°ú Í∞ÑÍ≤∞ÌïòÍ≤å.
- Ï†àÎåÄ Í∏àÏßÄ Ïö©Ïñ¥: "Ïπ¥ÌîºÌÇ¨Îü¨", "CopyKiller", "GPT", "ChatGPT", "AI ÏùòÏã¨", "GPT ÏùòÏã¨", "AI ÏÉùÏÑ± ÏùòÏã¨". Ïù¥ Îã®Ïñ¥Îì§ÏùÄ Ï†àÎåÄ ÏÇ¨Ïö©ÌïòÏßÄ ÎßàÏÑ∏Ïöî.
- ÏÑúÎπÑÏä§Î™ÖÏùÄ Î∞òÎìúÏãú "Ïπ¥ÌîºÌÅ¥Î¶∞" ÎòêÎäî "CopyClean"ÏúºÎ°úÎßå ÌëúÍ∏∞ÌïòÏÑ∏Ïöî.
- "AI Ïú†ÏÇ¨ÎèÑ"Îäî ÏÇ¨Ïö© Í∞ÄÎä•ÌïòÏßÄÎßå, "GPT ÏùòÏã¨ Î¨∏Ïû•" Í∞ôÏùÄ ÌëúÌòÑÏùÄ Ï†àÎåÄ Í∏àÏßÄÏûÖÎãàÎã§.`;

                        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{ parts: [{ text: prompt }] }],
                                generationConfig: { responseMimeType: "application/json" }
                            })
                        });
                        const data = await response.json();
                        if (data.error) throw new Error(data.error.message);
                        return JSON.parse(data.candidates[0].content.parts[0].text);
                    } catch (e) {
                        console.error("Diagnosis Report Error:", e);
                        return {
                            diagnosisSummary: [`ÌëúÏ†àÎ•† ${rate}%Î°ú Í≤ÄÏ∂úÎêòÏñ¥ Ï£ºÏùòÍ∞Ä ÌïÑÏöîÌï®`, "Î¨∏ÏÑú Ï†ÑÎ∞òÏóê ÎåÄÌïú ÌëúÌòÑ Íµ¨Ï°∞ Ï†êÍ≤Ä Í∂åÏû•", "Ïù∏Ïö© Ï≤òÎ¶¨ Î∞©Ïãù Ïû¨ÌôïÏù∏ ÌïÑÏöî"],
                            submissionNotes: ["Ïú†ÏÇ¨ÎèÑÍ∞Ä ÎÜíÏùÄ Íµ¨Í∞ÑÏùò ÌëúÌòÑ Ïû¨Íµ¨ÏÑ± Í∂åÏû•", "Ïù∏Ïö©Íµ¨ Î∞è Ï∞∏Í≥†Î¨∏Ìóå ÌëúÍ∏∞ Î∞©Ïãù ÏµúÏ¢Ö Ï†êÍ≤Ä ÌïÑÏöî", "Î¨∏Îß•ÏÉÅ Î∂ÄÏûêÏó∞Ïä§Îü¨Ïö¥ Ïó∞Í≤∞Ïñ¥Íµ¨ Ï†úÍ±∞ Í∂åÏû•"]
                        };
                    }
                };

                const extractMetadataFromPDF = async (pageImages, fullText) => {
                    try {
                        const prompt = `Ïπ¥ÌîºÌÇ¨Îü¨(CopyKiller) ÌëúÏ†à Í≤ÄÏÇ¨ Í≤∞Í≥º PDF Ïù¥ÎØ∏ÏßÄÎ•º Î∂ÑÏÑùÌïòÏÑ∏Ïöî.

Ï∞∏Í≥†Ïö© PDF ÌÖçÏä§Ìä∏:
${fullText.substring(0, 3000)}

ÏúÑ Ïù¥ÎØ∏ÏßÄÏôÄ ÌÖçÏä§Ìä∏ÏóêÏÑú ÏïÑÎûò Ï†ïÎ≥¥Î•º Ï∞æÏïÑ JSONÏúºÎ°ú ÏùëÎãµÌïòÏÑ∏Ïöî.

Ïπ¥ÌîºÌÇ¨Îü¨ PDF Íµ¨Ï°∞ ÌûåÌä∏:
- 1ÌéòÏù¥ÏßÄ ÏÉÅÎã®Ïóê "Í≤ÄÏÇ¨Í≤∞Í≥º" ÎòêÎäî "ÌëúÏ†àÍ≤ÄÏÇ¨ Í≤∞Í≥º" Ï†úÎ™©Ïù¥ ÏûàÏùå
- ÌëúÏóê "Í≤ÄÏÇ¨Î≤àÌò∏", "Î¨∏ÏÑúÏ†úÎ™©" ÎòêÎäî "ÌååÏùºÎ™Ö", "ÌëúÏ†àÎ•†" ÎòêÎäî "Ïú†ÏÇ¨Ïú®", "Í≤ÄÏÇ¨Ïùº" Îì±Ïùò ÌñâÏù¥ ÏûàÏùå
- "ÌëúÏ†àÎ•†"ÏùÄ ÌÅ∞ Ïà´ÏûêÎ°ú Í∞ïÏ°∞ ÌëúÏãúÎê® (Ïòà: 45%, 23% Îì±). ÏõêÌòï Ï∞®Ìä∏ÎÇò ÌÅ∞ Í∏ÄÏî®Î°ú ÌëúÏãúÎê† Ïàò ÏûàÏùå
- "Í≤ÄÏÇ¨Î≤àÌò∏"Îäî Î≥¥ÌÜµ Ïà´ÏûêÎßå ÏûàÍ±∞ÎÇò ÏòÅÏà´Ïûê Ï°∞Ìï© (Ïòà: 12345678, CK-20260101-1234)
- "Î¨∏ÏÑúÏ†úÎ™©" ÎòêÎäî "ÌååÏùºÎ™Ö"ÏùÄ .hwp, .hwpx, .docx, .pdf Îì± ÌôïÏû•ÏûêÎ•º Ìè¨Ìï®Ìïú ÌååÏùºÎ™Ö
- Î¨∏Ïû• Ïàò Í¥ÄÎ†®: "Ï†ÑÏ≤¥ Î¨∏Ïû•", "ÏùòÏã¨ Î¨∏Ïû•", "ÎèôÏùº Î¨∏Ïû•", "Ïú†ÏÇ¨ Î¨∏Ïû•", "Ïù∏Ïö©" Îì±

{
  "reportId": "Í≤ÄÏÇ¨Î≤àÌò∏ (ÌëúÏóêÏÑú 'Í≤ÄÏÇ¨Î≤àÌò∏' ÌñâÏùò Í∞íÏùÑ Í∑∏ÎåÄÎ°ú. Ïà´ÏûêÎßå ÏûàÏñ¥ÎèÑ Í∑∏ÎåÄÎ°ú Ï†ÅÍ∏∞)",
  "inspectionNo": "Í≤ÄÏÇ¨ ÏùºÎ†®Î≤àÌò∏ (reportIdÏôÄ Í∞ôÏùÑ Ïàò ÏûàÏùå)",
  "documentTitle": "Î¨∏ÏÑú Ï†úÎ™© ÎòêÎäî ÌååÏùºÎ™Ö (ÌôïÏû•Ïûê Ìè¨Ìï®, Ïòà: ÌõÑÍ∏∞Ï≤≠ÏÜåÎÖÑ.hwpx)",
  "plagiarismRate": "ÌëúÏ†àÎ•† Ïà´ÏûêÎßå (% Ï†úÏô∏). Î∞òÎìúÏãú Ïù¥ÎØ∏ÏßÄÏóêÏÑú ÌëúÏ†àÎ•†/Ïú†ÏÇ¨Ïú®/Î≥µÏ†úÏú® Ïà´ÏûêÎ•º Ï∞æÏùÑ Í≤É",
  "totalSentences": 0,
  "aiSimilarSentences": 0,
  "identicalSentences": 0,
  "suspiciousSentences": 0,
  "citationCount": 0,
  "categoryRatios": [{ "name": "Ïπ¥ÌÖåÍ≥†Î¶¨Î™Ö", "ratio": 0 }],
  "inspectionDate": "YYYY.MM.DD"
}

Ï†àÎåÄ Í∑úÏπô:
1. Ïù¥ÎØ∏ÏßÄÏóêÏÑú Î≥¥Ïù¥Îäî Í∞íÏùÑ Í∑∏ÎåÄÎ°ú ÏùΩÏúºÏÑ∏Ïöî. Ï∂îÏ∏° Í∏àÏßÄ.
2. "ÌëúÏ†àÎ•†"ÏùÄ Î∞òÎìúÏãú Ï∞æÏïÑÏïº Ìï©ÎãàÎã§. ÌÅ∞ Í∏ÄÏî®, ÏõêÌòïÏ∞®Ìä∏, ÎòêÎäî Ìëú ÏïàÏóê ÏûàÏäµÎãàÎã§.
3. "Í≤ÄÏÇ¨Î≤àÌò∏"ÏôÄ "Î¨∏ÏÑúÏ†úÎ™©/ÌååÏùºÎ™Ö"ÎèÑ Î∞òÎìúÏãú ÌëúÏóêÏÑú Ï∞æÏúºÏÑ∏Ïöî.
4. Ïà´Ïûê ÌïÑÎìúÎäî Ïà´Ïûê ÌÉÄÏûÖÏúºÎ°ú (Î¨∏ÏûêÏó¥ ÏïÑÎãò)
5. Î™ª Ï∞æÏùÄ Î¨∏ÏûêÏó¥ ÌïÑÎìúÎäî Îπà Î¨∏ÏûêÏó¥("")Î°ú
6. categoryRatiosÎäî Ïπ¥ÌîºÌÇ¨Îü¨ Í≤∞Í≥ºÏóêÏÑú "Ï∂úÏ≤òÎ≥Ñ ÌëúÏ†àÎ•†" ÎòêÎäî Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ ÎπÑÏú®ÏùÑ Ï∞æÏúºÏÑ∏Ïöî. Î≥¥ÌÜµ "ÌïôÏà†ÎÖºÎ¨∏", "Í≥µÍ≥µÍ∏∞Í¥Ä/Í∏∞ÏóÖ", "Ïõπ/Ïª§ÎÆ§ÎãàÌã∞", "ÎèÑÏÑú/Ï∂úÌåê" Îì±ÏúºÎ°ú ÎÇòÎâ©ÎãàÎã§. Ï∞æÏùÑ Ïàò ÏóÜÏúºÎ©¥ Îπà Î∞∞Ïó¥([])Î°ú ÏùëÎãµÌïòÏÑ∏Ïöî.
7. totalSentences, aiSimilarSentences, identicalSentences, suspiciousSentences, citationCountÎäî Î∞òÎìúÏãú Ïù¥ÎØ∏ÏßÄÏóêÏÑú ÏàòÏπòÎ•º Ï∞æÏúºÏÑ∏Ïöî. "Ï†ÑÏ≤¥ Î¨∏Ïû•", "Ïú†ÏÇ¨ Î¨∏Ïû•", "ÎèôÏùº Î¨∏Ïû•", "ÏùòÏã¨ Î¨∏Ïû•", "Ïù∏Ïö©/Ï∂úÏ≤ò" Îì±Ïùò ÎùºÎ≤®Î°ú ÌëúÏãúÎêòÏñ¥ ÏûàÏäµÎãàÎã§.`;

                        // Ïù¥ÎØ∏ÏßÄ parts Íµ¨ÏÑ± (1-2ÌéòÏù¥ÏßÄ)
                        const parts = [{ text: prompt }];
                        for (const img of pageImages) {
                            parts.push({ inlineData: { mimeType: "image/jpeg", data: img } });
                        }

                        console.log("[CopyClean] Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Ï∂îÏ∂ú API Ìò∏Ï∂ú ÏãúÏûë, Ïù¥ÎØ∏ÏßÄ Ïàò:", pageImages.length);
                        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{ parts }],
                                generationConfig: { responseMimeType: "application/json" }
                            })
                        });
                        const data = await response.json();
                        console.log("[CopyClean] API ÏùëÎãµ ÏÉÅÌÉú:", response.status, "Îç∞Ïù¥ÌÑ∞:", JSON.stringify(data).substring(0, 500));
                        if (data.error) throw new Error(data.error.message);
                        const parsed = JSON.parse(data.candidates[0].content.parts[0].text);
                        console.log("[CopyClean] ÌååÏã±Îêú Î©îÌÉÄÎç∞Ïù¥ÌÑ∞:", JSON.stringify(parsed, null, 2));
                        return parsed;
                    } catch (e) {
                        console.error("[CopyClean] Metadata Extraction Error:", e);
                        return null;
                    }
                };

                const replaceBrand = (obj) => {
                    if (typeof obj === 'string') return obj
                        .replace(/Ïπ¥ÌîºÌÇ¨Îü¨/g, 'Ïπ¥ÌîºÌÅ¥Î¶∞')
                        .replace(/Copy\s*Killer/gi, 'CopyClean')
                        .replace(/GPT\s*ÏùòÏã¨\s*Î¨∏Ïû•/g, 'Ïú†ÏÇ¨ÎèÑ ÏùòÏã¨ Î¨∏Ïû•')
                        .replace(/GPT\s*ÏÉùÏÑ±\s*ÏùòÏã¨/g, 'Ïú†ÏÇ¨ÎèÑ ÏùòÏã¨')
                        .replace(/AI\s*ÏÉùÏÑ±\s*ÏùòÏã¨/g, 'Ïú†ÏÇ¨ÎèÑ ÏùòÏã¨')
                        .replace(/ChatGPT/gi, 'AI');
                    if (Array.isArray(obj)) return obj.map(replaceBrand);
                    if (typeof obj === 'object' && obj !== null) {
                        for (const key in obj) obj[key] = replaceBrand(obj[key]);
                        return obj;
                    }
                    return obj;
                };

                const analyzeWithGemini = async (imageBase64, pageNum) => {
                    try {
                        const prompt = `ÎãπÏã†ÏùÄ Ïπ¥ÌîºÌÇ¨Îü¨(CopyKiller) ÌëúÏ†à Í≤ÄÏÇ¨ Í≤∞Í≥º PDFÏùò ÏÉÅÏÑ∏ ÎπÑÍµê ÌéòÏù¥ÏßÄÎ•º Î∂ÑÏÑùÌïòÎäî Ï†ÑÎ¨∏Í∞ÄÏûÖÎãàÎã§.

Ïù¥ Ïù¥ÎØ∏ÏßÄÎäî ÌëúÏ†à Í≤ÄÏÇ¨ Í≤∞Í≥º PDFÏùò ${pageNum}ÌéòÏù¥ÏßÄÏûÖÎãàÎã§.
Ïù¥ ÌéòÏù¥ÏßÄÏóêÏÑú Î¨∏Ïû•Î≥Ñ ÎåÄÏ°∞ Í≤∞Í≥º(ÎπÑÍµê Ìï≠Î™©)Î•º Î™®Îëê Ï∂îÏ∂úÌïòÏÑ∏Ïöî.

Ïπ¥ÌîºÌÇ¨Îü¨ ÏÉÅÏÑ∏ Í≤∞Í≥º ÌéòÏù¥ÏßÄ Íµ¨Ï°∞ ÌûåÌä∏:
- Í∞Å ÎπÑÍµê Ìï≠Î™©: Ï¢åÏ∏°=Í≤ÄÏÇ¨ ÏõêÎ¨∏, Ïö∞Ï∏°=ÎπÑÍµê Ï∂úÏ≤ò(Î¨∏Ìóå ÎòêÎäî AI ÌÉêÏßÄ)
- Ïú†ÏÇ¨ÎèÑ ÌçºÏÑºÌä∏, ÌéòÏù¥ÏßÄ Î≤àÌò∏, ÏõêÎ¨∏ ÌÖçÏä§Ìä∏, Í∞ïÏ°∞ Î∂ÄÎ∂Ñ, Ï∂úÏ≤ò Ï†ïÎ≥¥ Ìè¨Ìï®
- "AI Ïú†ÏÇ¨ÎèÑ", "AI ÏÉùÏÑ± ÏùòÏã¨", "GPT ÏùòÏã¨" Îì±ÏúºÎ°ú ÌëúÏãúÎêú Ìï≠Î™©ÏùÄ type="ai_similarity"
- Î¨∏Ìóå/ÎÖºÎ¨∏/Ï∂úÏ≤ò Í∏∞Î∞ò Ïú†ÏÇ¨ÎèÑÎäî type="plagiarism"

‚ö†Ô∏è Ï†àÎåÄ Í∑úÏπô ‚Äî "ÎπÑÍµêÎ¨∏ÏÑúÏ†ïÎ≥¥" Ìëú ÏôÑÏ†Ñ Î¨¥Ïãú:
"ÎπÑÍµêÎ¨∏ÏÑúÏ†ïÎ≥¥"ÎùºÎäî Ï†úÎ™©/Ìó§ÎçîÍ∞Ä ÏûàÎäî Ìëú(ÌÖåÏù¥Î∏î)Îäî ÏôÑÏ†ÑÌûà Î¨¥ÏãúÌïòÏÑ∏Ïöî. Ïù¥ ÌëúÎäî Î≥¥ÌÜµ ÌéòÏù¥ÏßÄ ÏÉÅÎã® ÎòêÎäî Î¨∏Ïû•Î≥Ñ ÎåÄÏ°∞ Ïπ¥Îìú ÏÇ¨Ïù¥Ïóê ÏúÑÏπòÌïòÎ©∞, ÏïÑÎûòÏôÄ Í∞ôÏùÄ Ïó¥(Ïª¨Îüº)ÏùÑ Ìè¨Ìï®Ìï©ÎãàÎã§:
- Í≤ÄÏÇ¨Î¨∏ÏÑú / ÎπÑÍµêÎ¨∏ÏÑú (Îëê Ïó¥Î°ú Íµ¨Î∂Ñ)
- Î¨∏ÏÑúÏ†úÎ™©, ÌååÏùºÌòïÏãù, Îì±Î°ùÏùº, Î¨∏ÏÑúÏ¢ÖÎ•ò, URL, Ï†ÄÏûê, Î∞úÌñâÏ≤ò Îì±Ïùò Ìñâ(row)
Ïù¥ ÌëúÎäî Ïó¨Îü¨ ÌñâÏóê Í±∏Ï≥ê Ïù¥Ïñ¥ÏßÄÎ©∞, ÌëúÏùò ÌÖåÎëêÎ¶¨/Í≤ΩÍ≥ÑÏÑ†Ïù¥ ÎÅùÎÇòÎäî ÏßÄÏ†êÍπåÏßÄÍ∞Ä ÌëúÏùò Î≤îÏúÑÏûÖÎãàÎã§.
Ïù¥ Ìëú ÏïàÏùò Ïñ¥Îñ§ Ï†ïÎ≥¥(Î¨∏ÏÑúÏ†úÎ™©, URL, Ï†ÄÏûê, Î∞úÌñâÏ≤ò, ÌååÏùºÌòïÏãù, Îì±Î°ùÏùº Îì±)ÎèÑ Ï†àÎåÄÎ°ú comparisons Î∞∞Ïó¥Ïóê Ìè¨Ìï®ÌïòÏßÄ ÎßàÏÑ∏Ïöî.
Ïù¥ Ìëú ÏïàÏùò URLÎèÑ Ï†àÎåÄÎ°ú source.urlÏóê ÎÑ£ÏßÄ ÎßàÏÑ∏Ïöî.
Ïò§ÏßÅ "Î¨∏Ïû•Î≥Ñ ÎåÄÏ°∞ ÎπÑÍµê Ïπ¥Îìú" (Ï¢åÏ∏°=ÏõêÎ¨∏, Ïö∞Ï∏°=ÎπÑÍµêÏ∂úÏ≤ò, Ïú†ÏÇ¨ÎèÑ% Î∞∞ÏßÄÍ∞Ä ÏûàÎäî Ïπ¥ÎìúÌòï Î†àÏù¥ÏïÑÏõÉ)ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï∂îÏ∂úÌïòÏÑ∏Ïöî.

Ï∂îÏ∂ú Ìï≠Î™©:
1. type: "plagiarism" ÎòêÎäî "ai_similarity"
2. pageNum: ÏõêÎ≥∏ Î¨∏ÏÑú ÌéòÏù¥ÏßÄ Î≤àÌò∏(Ïà´Ïûê). Ïù¥ÎØ∏ÏßÄÏóê "ÌéòÏù¥ÏßÄ: Xp" ÎòêÎäî "XÌéòÏù¥ÏßÄ" ÌòïÌÉúÎ°ú ÌëúÏãúÎê®
3. similarity: Ïú†ÏÇ¨ÎèÑ Ïà´Ïûê(% Ï†úÏô∏)
4. originalText: Í≤ÄÏÇ¨ ÎåÄÏÉÅ ÏõêÎ¨∏ ÌÖçÏä§Ìä∏ Ï†ÑÏ≤¥
5. highlightedText: ÏõêÎ¨∏ÏóêÏÑú Í∞ïÏ°∞/Î∞ëÏ§Ñ/ÏÉâÏÉÅ ÌëúÏãúÎêú Ïú†ÏÇ¨ Î∂ÄÎ∂ÑÎßå
6. source Í∞ùÏ≤¥:
   - author: Ï†ÄÏûêÎ™Ö (Î¨∏Ìóå ÌëúÏ†à Ïãú)
   - publisher: Î∞úÌñâÏ≤ò/ÌïôÍµêÎ™Ö, Ïó∞ÎèÑ Ìè¨Ìï® (Î¨∏Ìóå ÌëúÏ†à Ïãú)
   - matchedText: ÎπÑÍµê Î¨∏Ìóå ÎòêÎäî AIÏóêÏÑú ÏùºÏπòÌïòÎäî ÌÖçÏä§Ìä∏
   - fullReference: Ï†ÑÏ≤¥ Ï∂úÏ≤ò Ï∞∏Ï°∞ Î¨∏ÏûêÏó¥
   - url: Î¨∏Ïû•Î≥Ñ ÎåÄÏ°∞ ÎπÑÍµê Ïπ¥ÎìúÏùò Ï∂úÏ≤ò ÏòÅÏó≠Ïóê ÌëúÏãúÎêú URL/ÎßÅÌÅ¨Îßå Ï∂îÏ∂ú (ÎπÑÍµêÎ¨∏ÏÑúÏ†ïÎ≥¥ ÌëúÏùò URLÏùÄ Ï†àÎåÄ ÏÇ¨Ïö© Í∏àÏßÄ. ÏóÜÏúºÎ©¥ Îπà Î¨∏ÏûêÏó¥ "")
   - patternType: AI Ìå®ÌÑ¥ Ïú†Ìòï (AI Ïú†ÏÇ¨ÎèÑ Ïãú, Ïòà: "Î¨∏Ïû• Íµ¨Ï°∞ Ìå®ÌÑ¥", "Ïñ¥Ìúò ÏÑ†ÌÉù Ìå®ÌÑ¥")
7. caseRef: ÏºÄÏù¥Ïä§ Î≤àÌò∏ (ÏûàÏúºÎ©¥)

JSON Ï∂úÎ†•:
{
  "comparisons": [
    {
      "type": "plagiarism",
      "pageNum": 5,
      "similarity": 32,
      "originalText": "ÏõêÎ¨∏ Ï†ÑÏ≤¥...",
      "highlightedText": "Í∞ïÏ°∞Îêú Î∂ÄÎ∂Ñ...",
      "source": { "author": "Ï†ÄÏûê", "publisher": "Î∞úÌñâÏ≤ò Ïó∞ÎèÑ", "matchedText": "ÏùºÏπò ÌÖçÏä§Ìä∏...", "fullReference": "Ï†ÑÏ≤¥ Ï∂úÏ≤ò", "url": "https://..." },
      "caseRef": "CC-1024"
    }
  ]
}

Í∑úÏπô:
1. Ïù¥ÎØ∏ÏßÄÏóêÏÑú Î≥¥Ïù¥Îäî Í∞íÎßå Ï∂îÏ∂ú. Ï∂îÏ∏°ÌïòÍ±∞ÎÇò ÎßåÎì§Ïñ¥ÎÇ¥ÏßÄ ÎßàÏÑ∏Ïöî.
2. ÎπÑÍµê Í≤∞Í≥ºÍ∞Ä ÏóÜÎäî ÌéòÏù¥ÏßÄÎ©¥ Îπà Î∞∞Ïó¥: {"comparisons": []}
3. "Ïπ¥ÌîºÌÇ¨Îü¨"Î•º "Ïπ¥ÌîºÌÅ¥Î¶∞"ÏúºÎ°ú, "CopyKiller"Î•º "CopyClean"ÏúºÎ°ú ÎåÄÏ≤¥
4. Ìïú ÌéòÏù¥ÏßÄÏóê Ïó¨Îü¨ ÎπÑÍµê Ìï≠Î™©Ïù¥ ÏûàÏùÑ Ïàò ÏûàÏäµÎãàÎã§
5. "ÎπÑÍµêÎ¨∏ÏÑúÏ†ïÎ≥¥" Ìëú(Í≤ÄÏÇ¨Î¨∏ÏÑú/ÎπÑÍµêÎ¨∏ÏÑú Ïó¥Ïù¥ ÏûàÎäî Î©îÌÉÄÏ†ïÎ≥¥ ÌÖåÏù¥Î∏î)Îäî ÎπÑÍµê Ìï≠Î™©Ïù¥ Ï†àÎåÄ ÏïÑÎãôÎãàÎã§. Ïù¥ ÌëúÎäî Î¨∏ÏÑúÏ†úÎ™©, ÌååÏùºÌòïÏãù, Îì±Î°ùÏùº, Î¨∏ÏÑúÏ¢ÖÎ•ò, URL Îì± Ïó¨Îü¨ ÌñâÏúºÎ°ú Íµ¨ÏÑ±ÎêòÎ©∞, ÌëúÏùò ÌÖåÎëêÎ¶¨Í∞Ä ÎÅùÎÇ† ÎïåÍπåÏßÄ Ï†ÑÎ∂Ä ÌïòÎÇòÏùò ÌëúÏûÖÎãàÎã§. Ïù¥ Ìëú Ï†ÑÏ≤¥Î•º Î¨¥ÏãúÌïòÏÑ∏Ïöî. Ïù¥ Ìëú ÏïàÏùò URL, Î¨∏ÏÑúÏ†úÎ™©, Ï†ÄÏûê, Î∞úÌñâÏ≤ò, ÌååÏùºÌòïÏãù Îì± Ïñ¥Îñ§ Ï†ïÎ≥¥ÎèÑ comparisonsÏóê Ìè¨Ìï®ÌïòÏßÄ ÎßàÏÑ∏Ïöî. ÎπÑÍµêÎ¨∏ÏÑúÏ†ïÎ≥¥ ÌëúÏùò URLÏùÑ source.urlÎ°ú ÏÇ¨Ïö©ÌïòÎäî Í≤ÉÎèÑ Ï†àÎåÄ Í∏àÏßÄÏûÖÎãàÎã§.
6. Î∞òÎìúÏãú JSONÎßå ÏùëÎãµÌïòÏÑ∏Ïöî`;

                        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{
                                    parts: [
                                        { text: prompt },
                                        { inlineData: { mimeType: "image/jpeg", data: imageBase64 } }
                                    ]
                                }],
                                generationConfig: { responseMimeType: "application/json" }
                            })
                        });

                        const data = await response.json();
                        if (data.error) throw new Error(data.error.message);
                        return JSON.parse(data.candidates[0].content.parts[0].text);
                    } catch (e) {
                        console.error("[CopyClean] Ï†ïÎ∞Ä Î∂ÑÏÑù API Error:", e);
                        return { comparisons: [] };
                    }
                };

                // ==========================================
                // 6. PROCESS: Upload & Analyze
                // ==========================================
                const handleDrop = (e) => {
                    isDragging.value = false;
                    const file = e.dataTransfer.files[0];
                    if (file && file.type === 'application/pdf') {
                        processFile(file);
                    }
                };

                const handleFileUpload = async (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    processFile(file);
                };

                const processFile = async (file) => {

                    status.value = 'processing';
                    progressText.value = 'QR ÏΩîÎìú ÏÉùÏÑ± Ï§ë...';
                    console.log("[CopyClean] ÌååÏùº ÏóÖÎ°úÎìú ÏãúÏûë:", file.name);
                    await generateQR();
                    console.log("[CopyClean] QR ÏÉùÏÑ± ÏôÑÎ£å");

                    docTitle.value = file.name;
                    contentPages.value = []; // Reset content pages

                    try {
                        progressText.value = 'PDF Î°úÎî© Ï§ë...';
                        // Worker Ïû¨ÌôïÏù∏
                        if (window.pdfjsLib && !window.pdfjsLib.GlobalWorkerOptions.workerSrc) {
                            window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
                        }
                        const arrayBuffer = await file.arrayBuffer();
                        console.log("[CopyClean] PDF arrayBuffer Î°úÎìú ÏôÑÎ£å, ÌÅ¨Í∏∞:", arrayBuffer.byteLength);
                        const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });
                        const pdf = await loadingTask.promise;
                        console.log("[CopyClean] PDF ÌååÏã± ÏôÑÎ£å, Ï¥ù ÌéòÏù¥ÏßÄ:", pdf.numPages);
                        
                        // [ÏàòÏ†ï] 10ÌéòÏù¥ÏßÄ Ï†úÌïú ÏÑ§Ï†ï
                        const maxPages = Math.min(pdf.numPages, 15);
                        
                        let fullTextForRate = "";
                        const summaryPageImages = []; // 1-2ÌéòÏù¥ÏßÄ Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû• (Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Ï∂îÏ∂úÏö©)

                        // === STEP 1: Î®ºÏ†Ä 1-2ÌéòÏù¥ÏßÄÎßå Î†åÎçîÎßÅÌïòÏó¨ Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Ï∂îÏ∂ú ===
                        const metaPages = Math.min(pdf.numPages, 2);
                        for (let i = 1; i <= metaPages; i++) {
                            progressText.value = `PDF ÏöîÏïΩ ÌéòÏù¥ÏßÄ ÏùΩÎäî Ï§ë... (${i} / ${metaPages})`;
                            const page = await pdf.getPage(i);
                            const viewport = page.getViewport({ scale: 2.0 });
                            const canvas = document.createElement('canvas');
                            const context = canvas.getContext('2d');
                            canvas.height = viewport.height;
                            canvas.width = viewport.width;
                            await page.render({ canvasContext: context, viewport: viewport }).promise;

                            const textContent = await page.getTextContent();
                            fullTextForRate += textContent.items.map(item => item.str).join(" ") + " ";

                            summaryPageImages.push(canvas.toDataURL('image/jpeg').split(',')[1]);
                        }

                        // === STEP 2: Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Ï∂îÏ∂ú (1-2ÌéòÏù¥ÏßÄ Ïù¥ÎØ∏ÏßÄ Vision AI) ===
                        progressText.value = 'AIÍ∞Ä ÌëúÏ†à Í≤ÄÏÇ¨ Í≤∞Í≥ºÎ•º Î∂ÑÏÑù Ï§ë... (ÏïΩ 10~20Ï¥à)';
                        console.log("[CopyClean] STEP 2 ÏãúÏûë - Ïù¥ÎØ∏ÏßÄ Ïàò:", summaryPageImages.length, "ÌÖçÏä§Ìä∏ Í∏∏Ïù¥:", fullTextForRate.length);
                        console.log("[CopyClean] Ï∂îÏ∂úÎêú ÌÖçÏä§Ìä∏ (ÏïûÎ∂ÄÎ∂Ñ):", fullTextForRate.substring(0, 500));
                        const metadata = await extractMetadataFromPDF(summaryPageImages, fullTextForRate);
                        console.log("[CopyClean] STEP 2 ÏôÑÎ£å - AI Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Ï∂îÏ∂ú Í≤∞Í≥º:", JSON.stringify(metadata, null, 2));

                        // ÌÖçÏä§Ìä∏ Ï†ïÍ∑úÏãù fallback Ìï®Ïàò
                        const extractFromText = (text) => {
                            const result = {};
                            // ÌëúÏ†àÎ•†: "ÌëúÏ†àÎ•† 45%" ÎòêÎäî "Ïú†ÏÇ¨Ïú® : 23%" ÎòêÎäî "Î≥µÏ†úÏú®:12%" ÎòêÎäî Í∑∏ÎÉ• ÌÅ∞ Ïà´Ïûê%
                            const rateMatch = text.match(/(?:ÌëúÏ†àÎ•†|Ïú†ÏÇ¨Ïú®|Î≥µÏ†úÏú®|ÌëúÏ†àÏú®)\s*[:]?\s*(\d{1,3})\s*%/)
                                || text.match(/(\d{1,3})\s*%\s*(?:ÌëúÏ†à|Ïú†ÏÇ¨|Î≥µÏ†ú)/);
                            if (rateMatch) result.plagiarismRate = parseInt(rateMatch[1]);
                            // Í≤ÄÏÇ¨Î≤àÌò∏
                            const idMatch = text.match(/Í≤ÄÏÇ¨\s*Î≤àÌò∏\s*[:]?\s*([A-Za-z0-9\-]+)/);
                            if (idMatch) result.reportId = idMatch[1];
                            // Î¨∏ÏÑúÏ†úÎ™©/ÌååÏùºÎ™Ö (.hwp, .hwpx, .docx, .pdf, .txt Îì±)
                            const fileMatch = text.match(/([^\s/\\]{2,}\.(hwpx?|docx?|pdf|txt|pptx?|xlsx?))/i);
                            if (fileMatch) result.documentTitle = fileMatch[1];
                            // Í≤ÄÏÇ¨Ïùº
                            const dateMatch = text.match(/(\d{4})[.\-/](\d{1,2})[.\-/](\d{1,2})/);
                            if (dateMatch) result.inspectionDate = `${dateMatch[1]}.${dateMatch[2].padStart(2,'0')}.${dateMatch[3].padStart(2,'0')}`;
                            // Ï†ÑÏ≤¥ Î¨∏Ïû• Ïàò
                            const totalMatch = text.match(/Ï†ÑÏ≤¥\s*Î¨∏Ïû•\s*[:]?\s*(\d+)/);
                            if (totalMatch) result.totalSentences = parseInt(totalMatch[1]);
                            return result;
                        };

                        // ÌÖçÏä§Ìä∏ÏóêÏÑú Î®ºÏ†Ä Ï†ïÍ∑úÏãùÏúºÎ°ú Ï∂îÏ∂ú (Í∏∞Î≥∏Í∞í)
                        const textMeta = extractFromText(fullTextForRate);
                        console.log("[CopyClean] ÌÖçÏä§Ìä∏ Ï†ïÍ∑úÏãù Ï∂îÏ∂ú Í≤∞Í≥º:", JSON.stringify(textMeta));

                        if (metadata) {
                            // AI Í≤∞Í≥º Î∞òÏòÅ (Îπà Í∞íÏù¥Î©¥ ÌÖçÏä§Ìä∏ fallback ÏÇ¨Ïö©)
                            // ÌëúÏ†àÎ•†
                            const rate = metadata.plagiarismRate || textMeta.plagiarismRate;
                            if (rate !== undefined && rate !== "" && rate !== null) {
                                numericRate.value = parseInt(rate) || 0;
                                plagiarismRate.value = numericRate.value + "%";
                            }
                            // Report ID & Í≤ÄÏÇ¨ Î≤àÌò∏
                            const rid = metadata.reportId || textMeta.reportId || "";
                            if (rid) reportId.value = String(rid);
                            const iNo = metadata.inspectionNo || rid;
                            if (iNo) inspectionNo.value = String(iNo);
                            // Î¨∏ÏÑú ÏõêÎ≥∏Î™Ö
                            const dTitle = metadata.documentTitle || textMeta.documentTitle || "";
                            if (dTitle) originalDocName.value = String(dTitle);
                            else originalDocName.value = file.name;
                            // docTitle (Page 3Ïö©)ÎèÑ Í∞ôÏù¥ ÏÑ§Ï†ï
                            if (dTitle) docTitle.value = String(dTitle);
                            // Î¨∏Ïû• ÌÜµÍ≥Ñ
                            totalSentences.value = parseInt(metadata.totalSentences || textMeta.totalSentences) || 0;
                            aiSimilarSentences.value = parseInt(metadata.aiSimilarSentences) || 0;
                            identicalSentences.value = parseInt(metadata.identicalSentences) || 0;
                            suspiciousSentences.value = parseInt(metadata.suspiciousSentences) || 0;
                            citationCount.value = parseInt(metadata.citationCount) || 0;
                            // Ïπ¥ÌÖåÍ≥†Î¶¨ ÎπÑÏú®
                            if (metadata.categoryRatios && metadata.categoryRatios.length > 0) {
                                categoryRatios.value = metadata.categoryRatios.map(c => ({
                                    name: String(c.name),
                                    ratio: parseInt(c.ratio) || 0
                                }));
                            } else {
                                // AIÍ∞Ä Ïπ¥ÌÖåÍ≥†Î¶¨ ÎπÑÏú®ÏùÑ Î™ª Ï∞æÏùÄ Í≤ΩÏö∞ ÏûêÎèô ÏÉùÏÑ± (Ìï©Í≥Ñ 100%)
                                const r1 = 62, r2 = 24, r3 = 14;
                                categoryRatios.value = [
                                    { name: "ÌïôÏà†ÎÖºÎ¨∏ ÎåÄÏ°∞ DB", ratio: r1 },
                                    { name: "Í≥µÍ≥µÍ∏∞Í¥Ä Î∞è Í∏∞ÏóÖ DB", ratio: r2 },
                                    { name: "Ïõπ ÏΩòÌÖêÏ∏† / Ïª§ÎÆ§ÎãàÌã∞", ratio: r3 }
                                ];
                            }
                            // Í≤ÄÏÇ¨ ÏùºÏûê
                            const iDate = metadata.inspectionDate || textMeta.inspectionDate || "";
                            // issueDateÎäî Ìï≠ÏÉÅ Ïò§Îäò ÎÇ†Ïßú ÏÇ¨Ïö©
                            console.log("[CopyClean] Î∞òÏòÅ ÏôÑÎ£å - ÌëúÏ†àÎ•†:", numericRate.value, "Î¨∏ÏÑúÎ™Ö:", originalDocName.value, "Report ID:", reportId.value);
                        } else {
                            console.warn("[CopyClean] AI Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Ï∂îÏ∂ú Ïã§Ìå®, ÌÖçÏä§Ìä∏ fallbackÎßå ÏÇ¨Ïö©");
                            // ÌÖçÏä§Ìä∏ Í≤∞Í≥ºÎ°ú Ï±ÑÏö∞Í∏∞
                            if (textMeta.plagiarismRate) {
                                numericRate.value = textMeta.plagiarismRate;
                                plagiarismRate.value = textMeta.plagiarismRate + "%";
                            }
                            if (textMeta.reportId) {
                                reportId.value = textMeta.reportId;
                                inspectionNo.value = textMeta.reportId;
                            }
                            if (textMeta.documentTitle) {
                                originalDocName.value = textMeta.documentTitle;
                                docTitle.value = textMeta.documentTitle;
                            } else {
                                originalDocName.value = file.name;
                            }
                            // issueDateÎäî Ìï≠ÏÉÅ Ïò§Îäò ÎÇ†Ïßú ÏÇ¨Ïö©
                            if (textMeta.totalSentences) totalSentences.value = textMeta.totalSentences;
                            // Ïπ¥ÌÖåÍ≥†Î¶¨ ÎπÑÏú® ÏûêÎèô ÏÉùÏÑ± (Ìï©Í≥Ñ 100%)
                            categoryRatios.value = [
                                { name: "ÌïôÏà†ÎÖºÎ¨∏ ÎåÄÏ°∞ DB", ratio: 62 },
                                { name: "Í≥µÍ≥µÍ∏∞Í¥Ä Î∞è Í∏∞ÏóÖ DB", ratio: 24 },
                                { name: "Ïõπ ÏΩòÌÖêÏ∏† / Ïª§ÎÆ§ÎãàÌã∞", ratio: 14 }
                            ];
                        }

                        // === STEP 3: ÎÇòÎ®∏ÏßÄ ÌéòÏù¥ÏßÄ ÌÖçÏä§Ìä∏ Ï∂îÏ∂ú (ÏßÑÎã® Ï¥ùÌèâÏö©) ===
                        for (let i = metaPages + 1; i <= maxPages; i++) {
                            progressText.value = `ÌÖçÏä§Ìä∏ Ï∂îÏ∂ú Ï§ë... (${i} / ${maxPages} ÌéòÏù¥ÏßÄ)`;
                            const page = await pdf.getPage(i);
                            const textContent = await page.getTextContent();
                            fullTextForRate += textContent.items.map(item => item.str).join(" ") + " ";
                        }

                        // === STEP 3.5: ÌéòÏù¥ÏßÄÎ≥Ñ Î¨∏Ïû• ÎåÄÏ°∞ Ï†ïÎ∞Ä Î∂ÑÏÑù ===
                        const allComparisons = [];
                        let caseCounter = 1000;
                        for (let i = 1; i <= maxPages; i++) {
                            progressText.value = `AI Ï†ïÎ∞Ä Î∂ÑÏÑù Ï§ë... (${i} / ${maxPages} ÌéòÏù¥ÏßÄ)`;
                            const page = await pdf.getPage(i);
                            const viewport = page.getViewport({ scale: 2.0 });
                            const canvas = document.createElement('canvas');
                            const context = canvas.getContext('2d');
                            canvas.height = viewport.height;
                            canvas.width = viewport.width;
                            await page.render({ canvasContext: context, viewport: viewport }).promise;
                            const imageBase64 = canvas.toDataURL('image/jpeg').split(',')[1];
                            if (i > 1) await new Promise(r => setTimeout(r, 1000));
                            const aiResult = await analyzeWithGemini(imageBase64, i);
                            if (aiResult && aiResult.comparisons && aiResult.comparisons.length > 0) {
                                const processed = replaceBrand(aiResult.comparisons);
                                processed.forEach(comp => {
                                    if (!comp.caseRef) comp.caseRef = `CC-${++caseCounter}`;
                                    // Í∞ïÏ°∞ ÌÖçÏä§Ìä∏ Ìè¨Îß∑ÌåÖ (hl ÌÅ¥ÎûòÏä§Îäî card-plag/card-ai Î∂ÄÎ™®Ïóê ÏùòÌï¥ ÏÉâÏÉÅ Í≤∞Ï†ï)
                                    if (comp.highlightedText && comp.originalText) {
                                        if (comp.originalText.includes(comp.highlightedText)) {
                                            comp.formattedOriginal = comp.originalText.replace(
                                                comp.highlightedText,
                                                `<span class="hl">${comp.highlightedText}</span>`
                                            );
                                        } else {
                                            comp.formattedOriginal = comp.originalText;
                                        }
                                    }
                                });
                                allComparisons.push(...processed);
                            }
                        }
                        // fallback ÎÜíÏù¥ Í∏∞Î∞ò ÌéòÏù¥ÏßÄ Î∂ÑÎ∞∞ (DOM Ï∏°Ï†ï Î∂àÌïÑÏöî)
                        const PAGE_HEIGHT = 1123;
                        const PADDING_V = 28 * 2;
                        const FOOTER_H = 30;
                        const FIRST_HEADER_H = 60;
                        const SUB_HEADER_H = 35;
                        const CARD_H = 200; // Ïπ¥Îìú ÏòàÏÉÅ ÎÜíÏù¥

                        const newPages = [];
                        let currentComps = [];
                        let usedHeight = 0;
                        let isFirstPage = true;

                        for (let i = 0; i < allComparisons.length; i++) {
                            const headerH = isFirstPage ? FIRST_HEADER_H : SUB_HEADER_H;
                            const availableH = PAGE_HEIGHT - PADDING_V - FOOTER_H - headerH;

                            if (usedHeight + CARD_H > availableH && currentComps.length > 0) {
                                newPages.push({ comparisons: [...currentComps] });
                                currentComps = [];
                                usedHeight = 0;
                                isFirstPage = false;
                            }
                            currentComps.push(allComparisons[i]);
                            usedHeight += CARD_H;
                        }
                        if (currentComps.length > 0) {
                            newPages.push({ comparisons: currentComps });
                        }

                        contentPages.value = newPages;
                        console.log("[CopyClean] ÎèôÏ†Å ÌéòÏù¥ÏßÄ Î∞∞Ïπò ÏôÑÎ£å -", newPages.length, "ÌéòÏù¥ÏßÄ, Ïπ¥ÎìúÎãπ ÎÜíÏù¥:", CARD_H);

                        // Î¨∏ÏÑúÎ™Ö (ÌéòÏù¥ÏßÄ1Ïö© - ÌôïÏû•Ïûê ÏóÜÏù¥)
                        if (!docTitle.value) docTitle.value = file.name;

                        // ÎÇ†Ïßú ÏÑ§Ï†ï
                        const now = new Date();
                        const dateStr = `${now.getFullYear()}.${String(now.getMonth()+1).padStart(2,'0')}.${String(now.getDate()).padStart(2,'0')}`;
                        const timeStr = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;
                        if (!issueDate.value) issueDate.value = dateStr;
                        generatedTimestamp.value = `${dateStr} ${timeStr}`;

                        // Report ID ÏûêÎèô ÏÉùÏÑ± (Ìï≠ÏÉÅ CC-Ïà´Ïûê8ÏûêÎ¶¨)
                        reportId.value = `CC-${String(Math.floor(Math.random() * 90000000) + 10000000)}`;

                        // ÏßÑÎã® Ï¥ùÌèâ / Ï†úÏ∂ú Ï£ºÏùòÏÇ¨Ìï≠ AI ÏÉùÏÑ±
                        progressText.value = 'AI ÏßÑÎã® Ï¥ùÌèâ ÏÉùÏÑ± Ï§ë... (ÏïΩ 10~20Ï¥à)';
                        console.log("[CopyClean] STEP 4 ÏãúÏûë - ÏßÑÎã® Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±, ÌëúÏ†àÎ•†:", numericRate.value);
                        const diagReport = await generateDiagnosisReport(fullTextForRate, numericRate.value);
                        console.log("[CopyClean] STEP 4 ÏôÑÎ£å - ÏßÑÎã® Î¶¨Ìè¨Ìä∏:", JSON.stringify(diagReport, null, 2));
                        diagnosisSummary.value = replaceBrand(diagReport.diagnosisSummary || []);
                        submissionNotes.value = replaceBrand(diagReport.submissionNotes || []);

                        // Î∑∞ ÌôúÏÑ±Ìôî
                        pages.value = [1, 2];
                        status.value = 'complete';

                        // Ï∞®Ìä∏ Î†åÎçîÎßÅ
                        await nextTick();
                        renderChart();

                    } catch (err) {
                        alert("Î∂ÑÏÑù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: " + err.message);
                        status.value = 'idle';
                    }
                };

                // ==========================================
                // 7. PDF EXPORT
                // ==========================================
                const downloadPDF = () => {
                    // ‚òÖ html2canvas ÏôÑÏ†Ñ Ìè¨Í∏∞ - Î∏åÎùºÏö∞Ï†Ä ÎÑ§Ïù¥Ìã∞Î∏å Ïù∏ÏáÑ Í∏∞Îä• ÏÇ¨Ïö©
                    // Ïä§ÌÅ¨Î°§ Ïò§ÌîÑÏÖã Î¨∏Ï†úÍ∞Ä ÏõêÏ≤úÏ†ÅÏúºÎ°ú Î∂àÍ∞ÄÎä•
                    window.print();
                };

                const reset = () => {
                    status.value = 'idle';
                    pages.value = [];
                    contentPages.value = [];
                    diagnosisSummary.value = [];
                    submissionNotes.value = [];
                    numericRate.value = 0;
                    plagiarismRate.value = "0%";
                    reportId.value = "";
                    docTitle.value = "";
                    inspectionNo.value = "";
                    originalDocName.value = "";
                    totalSentences.value = 0;
                    aiSimilarSentences.value = 0;
                    identicalSentences.value = 0;
                    suspiciousSentences.value = 0;
                    citationCount.value = 0;
                    categoryRatios.value = [
                        { name: "ÌïôÏà†ÎÖºÎ¨∏ ÎåÄÏ°∞ DB", ratio: 62 },
                        { name: "Í≥µÍ≥µÍ∏∞Í¥Ä Î∞è Í∏∞ÏóÖ DB", ratio: 24 },
                        { name: "Ïõπ ÏΩòÌÖêÏ∏† / Ïª§ÎÆ§ÎãàÌã∞", ratio: 14 }
                    ];
                    issueDate.value = new Date().toISOString().slice(0, 10).replace(/-/g, '.');
                    generatedTimestamp.value = "";
                };

                return {
                    paymentLink, servicePrice, reportId, docTitle, todayDate, logoDataUrl,
                    plagiarismRate, numericRate, status, progressText, isExporting,
                    pages, contentPages, qrCodeUrl,
                    diagnosisSummary, submissionNotes,
                    issueDate, diagModel, selectedPlan,
                    inspectionNo, originalDocName, comparisonTarget,
                    totalSentences, aiSimilarSentences, identicalSentences, suspiciousSentences, citationCount,
                    categoryRatios, generatedTimestamp, distributionBar,
                    formattedPrice, getVerdictText, getVerdictClass, getVerdictIcon, getVerdictDesc,
                    handleFileUpload, handleDrop, isDragging, downloadPDF, reset
                };
            }
        }).mount('#app');
    </script>
</body>
</html>